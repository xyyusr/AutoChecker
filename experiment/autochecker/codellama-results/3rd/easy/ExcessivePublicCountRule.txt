开始

========================================== Rule ExcessivePublicCountRule ===========================================
一共 7 个测试用例
正例 4 个
反例 3 个
1252
960
==========================第1轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the name of class.
2. Check whether the class is public.
3.  Get all fields declared in class.
4. Check whether field is public.
5. Get the number of public fields in class.
6. Check whether the number of public fields is greater than or equal to 2.
If the number of public fields in a public class is greater than or equal to 2, then this test case violate the rule.
['Get the name of class.', 'Check whether the class is public.', ' Get all fields declared in class.', 'Check whether field is public.', 'Get the number of public fields in class.', 'Check whether the number of public fields is greater than or equal to 2.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'ASTFieldDeclaration', 'TestFrameworksUtil', 'ClassNamesUtil', 'ASTVariableDeclarator', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'ASTVariableDeclaratorId', 'TypeConversion', 'ASTCompilationUnit', 'AstImplUtil', 'TokenUtils']
*Get the name of class.* 匹配到的元操作或API：
logic: Get the name of class.
most similar meta operation: Get the name of class
cosine Similarity: 0.9738673567771912
*Check whether the class is public.* 匹配到的元操作或API：
logic: Check whether the class is public.
most similar meta operation: Check whether the class is public
cosine Similarity: 0.9849746227264404
*Get all fields declared in class.* 匹配到的元操作或API：
query: Get all fields declared in class.
most similar API: get declarations of class or interface
cosine Similarity: 0.8290456533432007
*Check whether field is public.* 匹配到的元操作或API：
logic: Check whether field is public.
most similar meta operation: Check whether the field is public
cosine Similarity: 0.9846292734146118
*Get the number of public fields in class.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number of public fields is greater than or equal to 2.* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Too many public fields
public class Foo {
    public int foo;
    public int bif;
    public int baz;
    public int bof;
}
The description of this test case is: bad 1
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'foo')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'bif')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'baz')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'bof')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public java.lang.String getSimpleName()
2. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public boolean isPublic()
3. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<NodeStream<T> getDeclarations(java.lang.Class)
4. net.sourceforge.pmd.lang.java.ast.ASTFieldDeclaration: public boolean isPublic()



Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.design;


import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {

    @Override
    public Object visit(ASTClassOrInterfaceDeclaration node, Object data) {
        if (node.isPublic()) {
            int publicFieldCount = 0;
            NodeStream<JavaNode> fieldDeclarations = node.getDeclarations(ASTFieldDeclaration.class);
            for (JavaNode declaration : fieldDeclarations) {
                if (((ASTFieldDeclaration) declaration).isPublic()) {
                    publicFieldCount++;
                }
            }
            if (publicFieldCount > 2) {
                addViolation(data, node);
            }
        }
        return super.visit(node, data);
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
==========================第2轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the class declaration of the node.
2. Check whether the class is a top-level class (not nested inside another class).
3. Get all public methods and fields declared in the class.
4. Get the number of public methods and fields declared in the class.
5. Check whether the number of public methods and fields declared in the class is greater than or equal to 2.
6. Check whether the field is not used in the class (e.g., no getter or setter methods, not used in other methods).
7. If the number of public methods and fields is greater than or equal to 2, and the field is not used in the class, then report this node as violating the rule.
['Get the class declaration of the node.', 'Check whether the class is a top-level class (not nested inside another class).', 'Get all public methods and fields declared in the class.', 'Get the number of public methods and fields declared in the class.', 'Check whether the number of public methods and fields declared in the class is greater than or equal to 2.', 'Check whether the field is not used in the class (e.g., no getter or setter methods, not used in other methods).', 'If the number of public methods and fields is greater than or equal to 2, and the field is not used in the class, then report this node as violating the rule.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'ASTFieldDeclaration', 'TestFrameworksUtil', 'ClassNamesUtil', 'ASTVariableDeclarator', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'ASTVariableDeclaratorId', 'TypeConversion', 'ASTCompilationUnit', 'AstImplUtil', 'TokenUtils']
*Get the class declaration of the node.* 匹配到的元操作或API：
query: Get the class declaration of the node.
most similar API: get super class type node of class or interface
cosine Similarity: 0.8012282848358154
*Check whether the class is a top-level class (not nested inside another class).* 匹配到的元操作或API：
query: Check whether the class is a top-level class (not nested inside another class).
most similar API: Check whether the class or interface is top level
cosine Similarity: 0.904801607131958
*Get all public methods and fields declared in the class.* 匹配到的元操作或API：
query: Get all public methods and fields declared in the class.
most similar API: get declarations of class or interface
cosine Similarity: 0.8109412789344788
*Get the number of public methods and fields declared in the class.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number of public methods and fields declared in the class is greater than or equal to 2.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the field is not used in the class (e.g., no getter or setter methods, not used in other methods).* 匹配到的元操作或API：
未匹配成功元操作或API
*If the number of public methods and fields is greater than or equal to 2, and the field is not used in the class, then report this node as violating the rule.* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Too many public fields
public class Foo {
    public int foo;
    public int bif;
    public int baz;
    public int bof;
}
The description of this test case is: bad 1
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'foo')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'bif')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'baz')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'bof')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceType getSuperClassTypeNode(), //Returns the superclass type node if this node is a class declaration and explicitly declares an {@code extends} clause. Superinterfaces of an interface are not considered. <p>Returns {@code null} otherwise.
2. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public boolean isTopLevel(), //Returns true if this type is declared at the top-level of a file.
3. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<NodeStream<T> getDeclarations(java.lang.Class)



Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.design;

import java.util.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public ExcessivePublicCountRule() {
        addRuleMatch(ASTClassOrInterfaceDeclaration.class, "excessive public count");
    }

    @Override
    public Object visit(ASTClassOrInterfaceDeclaration node, Object data) {
        if (node.isTopLevel() && node.getModifiers().hasModifier("public")) {
            int publicFieldCount = 0;
            int publicMethodCount = 0;

            NodeStream<JavaNode> siblings = node.getDeclarations(ASTFieldDeclaration.class);
            for (JavaNode sibling : siblings) {
                if (((ASTFieldDeclaration)sibling).getModifiers().hasModifier("public")) {
                    publicFieldCount++;
                }
            }

            siblings = node.getDeclarations(ASTMethodDeclaration.class);
            for (JavaNode sibling : siblings) {
                if (((ASTMethodDeclaration)sibling).getModifiers().hasModifier("public")) {
                    publicMethodCount++;
                }
            }

            int totalCount = publicFieldCount + publicMethodCount;
            if (totalCount > 2) {
                addViolation(this, data, node);
            }
        }

        return super.visit(node, data);
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
==========================第3轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the number of public fields declared in class.
2. Check whether the number of public fields declared in class is greater than 2.
3. If the number of public fields declared in class is greater than 2, then check the number of public methods in class.
4. Get the number of public methods declared in class.
5. Check whether the number of public methods declared in class is greater than 2.
6. If the number of public methods declared in class is greater than 2, then this test case violate the rule.
['Get the number of public fields declared in class.', 'Check whether the number of public fields declared in class is greater than 2.', 'If the number of public fields declared in class is greater than 2, then check the number of public methods in class.', 'Get the number of public methods declared in class.', 'Check whether the number of public methods declared in class is greater than 2.', 'If the number of public methods declared in class is greater than 2, then this test case violate the rule.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'ASTFieldDeclaration', 'TestFrameworksUtil', 'ClassNamesUtil', 'ASTVariableDeclarator', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'ASTVariableDeclaratorId', 'TypeConversion', 'ASTCompilationUnit', 'AstImplUtil', 'TokenUtils']
*Get the number of public fields declared in class.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number of public fields declared in class is greater than 2.* 匹配到的元操作或API：
未匹配成功元操作或API
*If the number of public fields declared in class is greater than 2, then check the number of public methods in class.* 匹配到的元操作或API：
未匹配成功元操作或API
*Get the number of public methods declared in class.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number of public methods declared in class is greater than 2.* 匹配到的元操作或API：
query: Check whether the number of public methods declared in class is greater than 2.
most similar API: Check whether is declared in class
cosine Similarity: 0.8080649971961975
*If the number of public methods declared in class is greater than 2, then this test case violate the rule.* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Too many public fields
public class Foo {
    public int foo;
    public int bif;
    public int baz;
    public int bof;
}
The description of this test case is: bad 1
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'foo')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'bif')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'baz')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'bof')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.types.TypeTestUtil: static public boolean isDeclaredInClass(java.lang.Class, net.sourceforge.pmd.lang.java.types.JMethodSig), //Returns true if the signature is that of a method declared in the given class. @param klass Class @param sig   Method signature to test @throws NullPointerException If any argument is null



Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.design;

import java.util.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {

    public ExcessivePublicCountRule() {
        super("excessivepubliccount", "Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk.");
    }

    @Override
    public Object visit(ASTClassOrInterfaceDeclaration node, Object data) {
        int publicFieldCount = 0;
        int publicMethodCount = 0;

        for (ASTFieldDeclaration field : node.getFieldDeclarations()) {
            if (field.getModifiers().containsKey(ASTModifiers.PUBLIC)) {
                publicFieldCount++;
            }
        }

        for (ASTMethodDeclaration method : node.getMethodDeclarations()) {
            if (method.getModifiers().containsKey(ASTModifiers.PUBLIC)) {
                publicMethodCount++;
            }
        }

        if (publicFieldCount > 2 || publicMethodCount > 2) {
            addViolation(data, node);
        }

        return super.visit(node, data);
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
==========================第4轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the list of fields declared in class.
        2. Check whether the field is public.
        3. Get the number of public fields.
        4. Check whether the number of public fields is greater than or equal to 2.
        If the number of public fields is greater than or equal to 2, then this test case violate the rule.
['Get the list of fields declared in class.', 'Check whether the field is public.', 'Get the number of public fields.', 'Check whether the number of public fields is greater than or equal to 2.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'ASTFieldDeclaration', 'TestFrameworksUtil', 'ClassNamesUtil', 'ASTVariableDeclarator', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'ASTVariableDeclaratorId', 'TypeConversion', 'ASTCompilationUnit', 'AstImplUtil', 'TokenUtils']
*Get the list of fields declared in class.* 匹配到的元操作或API：
query: Get the list of fields declared in class.
most similar API: get declared annotations of field
cosine Similarity: 0.8414510488510132
*Check whether the field is public.* 匹配到的元操作或API：
logic: Check whether the field is public.
most similar meta operation: Check whether the field is public
cosine Similarity: 0.9851202964782715
*Get the number of public fields.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number of public fields is greater than or equal to 2.* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Too many public fields
public class Foo {
    public int foo;
    public int bif;
    public int baz;
    public int bof;
}
The description of this test case is: bad 1
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'foo')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'bif')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'baz')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'bof')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTFieldDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<ASTAnnotation> getDeclaredAnnotations()
2. net.sourceforge.pmd.lang.java.ast.ASTFieldDeclaration: public boolean isPublic()



Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


出现语法错误，这一轮舍弃，直接重新生成
==========================第5轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get all fields declared in the class.
        2. Get all methods declared in the class.
        3. Check whether the field or method is public.
        4. Check whether the count of public fields or methods is greater than or equal to the threshold (2 in this case).
        If the count of public fields or methods is greater than or equal to the threshold, then this test case violate the rule.
['Get all fields declared in the class.', 'Get all methods declared in the class.', 'Check whether the field or method is public.', 'Check whether the count of public fields or methods is greater than or equal to the threshold (2 in this case).']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'ASTFieldDeclaration', 'TestFrameworksUtil', 'ClassNamesUtil', 'ASTVariableDeclarator', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'ASTVariableDeclaratorId', 'TypeConversion', 'ASTCompilationUnit', 'AstImplUtil', 'TokenUtils']
*Get all fields declared in the class.* 匹配到的元操作或API：
query: Get all fields declared in the class.
most similar API: get declared annotations of field
cosine Similarity: 0.8222572803497314
*Get all methods declared in the class.* 匹配到的元操作或API：
query: Get all methods declared in the class.
most similar API: get declarations of class or interface
cosine Similarity: 0.8056354522705078
*Check whether the field or method is public.* 匹配到的元操作或API：
logic: Check whether the field or method is public.
most similar meta operation: Check whether the field is public
cosine Similarity: 0.9328212141990662
*Check whether the count of public fields or methods is greater than or equal to the threshold (2 in this case).* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Too many public fields
public class Foo {
    public int foo;
    public int bif;
    public int baz;
    public int bof;
}
The description of this test case is: bad 1
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'foo')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'bif')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'baz')
    ——ASTFieldDeclaration
      ——ASTModifierList
      ——ASTPrimitiveType (this is a primitive type)
      ——ASTVariableDeclarator
        ——ASTVariableDeclaratorId (declared variable name = 'bof')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTFieldDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<ASTAnnotation> getDeclaredAnnotations()
2. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<NodeStream<T> getDeclarations(java.lang.Class)
3. net.sourceforge.pmd.lang.java.ast.ASTFieldDeclaration: public boolean isPublic()



Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.design;


import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {

    @Override
    public Object visit(ASTClassOrInterfaceDeclaration node, Object data) {
        if (node == null) {
            return super.visit(node, data);
        }
        
        int count = 0;
        for (JavaNode child : node.children()) {
            if (child instanceof ASTFieldDeclaration) {
                ASTFieldDeclaration fieldDeclaration = (ASTFieldDeclaration) child;
                if (fieldDeclaration != null && fieldDeclaration.isPublic()) {
                    count++;
                }
            }
        }
        if (count > 2) {
            if (node != null) {
                addViolation(this, data, node);
            }
        }
        return super.visit(node, data);
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
5轮生成的都没通过第一个测试用例，删除此测试用例，换一个生成first checker
删除此测试用例: bad 1
1423
1097
==========================第1轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the number of public methods and attributes declared in the class.
2. Check whether the number is greater than or equal to 2.
3. If yes, report the node.

In this case, the class `Foo` has 3 public methods, which is greater than the threshold of 2, so it is reported as a violation.
['Get the number of public methods and attributes declared in the class.', 'Check whether the number is greater than or equal to 2.', 'If yes, report the node.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'ASTNumericLiteral', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'TestFrameworksUtil', 'ASTFormalParameters', 'ClassNamesUtil', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'TypeConversion', 'ASTMethodDeclaration', 'ASTReturnStatement', 'ASTCompilationUnit', 'ASTBlock', 'AstImplUtil', 'TokenUtils']
*Get the number of public methods and attributes declared in the class.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number is greater than or equal to 2.* 匹配到的元操作或API：
未匹配成功元操作或API
*If yes, report the node.* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Some public methods
public class Foo {
    public int foo1() {return 1;}
    public int foo2() {return 1;}
    public int foo3() {return 1;}
}
The description of this test case is: bad 2
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTMethodDeclaration (method name = 'foo1')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo2')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo3')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:




Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


出现语法错误，这一轮舍弃，直接重新生成
==========================第2轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the class declaration.
2. Check whether the class is public.
3. Get all members declared in class.
4. Get the number of members declared in class.
5. Check whether number of members is greater than 2.
6. Check whether any of the member is a method.
7. Check whether any of the member is a field.
8. If number of members is greater than 2, then class is violating the rule.
['Get the class declaration.', 'Check whether the class is public.', 'Get all members declared in class.', 'Get the number of members declared in class.', 'Check whether number of members is greater than 2.', 'Check whether any of the member is a method.', 'Check whether any of the member is a field.', 'If number of members is greater than 2, then class is violating the rule.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'ASTNumericLiteral', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'TestFrameworksUtil', 'ASTFormalParameters', 'ClassNamesUtil', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'TypeConversion', 'ASTMethodDeclaration', 'ASTReturnStatement', 'ASTCompilationUnit', 'ASTBlock', 'AstImplUtil', 'TokenUtils']
*Get the class declaration.* 匹配到的元操作或API：
query: Get the class declaration.
most similar API: get declarations of class or interface
cosine Similarity: 0.8343498706817627
*Check whether the class is public.* 匹配到的元操作或API：
logic: Check whether the class is public.
most similar meta operation: Check whether the class is public
cosine Similarity: 0.9849746227264404
*Get all members declared in class.* 匹配到的元操作或API：
query: Get all members declared in class.
most similar API: get declarations of class or interface
cosine Similarity: 0.8176682591438293
*Get the number of members declared in class.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether number of members is greater than 2.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether any of the member is a method.* 匹配到的元操作或API：
query: Check whether any of the member is a method.
most similar API: Check whether is test method
cosine Similarity: 0.8198166489601135
*Check whether any of the member is a field.* 匹配到的元操作或API：
query: Check whether any of the member is a field.
most similar API: Check whether is ref to field of this instance
cosine Similarity: 0.8141627907752991
*If number of members is greater than 2, then class is violating the rule.* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Some public methods
public class Foo {
    public int foo1() {return 1;}
    public int foo2() {return 1;}
    public int foo3() {return 1;}
}
The description of this test case is: bad 2
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTMethodDeclaration (method name = 'foo1')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo2')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo3')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<NodeStream<T> getDeclarations(java.lang.Class)
2. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public boolean isPublic()
3. net.sourceforge.pmd.lang.java.rule.internal.TestFrameworksUtil: static public boolean isTestMethod(net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration), //Returns true if this is either a JUnit test or a TestNG test.
4. net.sourceforge.pmd.lang.java.ast.internal.JavaAstUtils: static public boolean isRefToFieldOfThisInstance(net.sourceforge.pmd.lang.java.ast.ASTExpression), //Returns true if the expression has the form `field`, or `this.field`, where `field` is a field declared in the enclosing class. Considers inherited fields. Assumes we're not in a static context.



Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


出现语法错误，这一轮舍弃，直接重新生成
==========================第3轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the class declaration.
2. Get the methods declared in class.
3. Check whether method is public.
4. Get the number of public methods.
5. Check whether the number of public methods is greater than or equal to 2.

If the number of public methods in a class is greater than or equal to 2, then this class is a candidate that violates the rule.
['Get the class declaration.', 'Get the methods declared in class.', 'Check whether method is public.', 'Get the number of public methods.', 'Check whether the number of public methods is greater than or equal to 2.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'ASTNumericLiteral', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'TestFrameworksUtil', 'ASTFormalParameters', 'ClassNamesUtil', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'TypeConversion', 'ASTMethodDeclaration', 'ASTReturnStatement', 'ASTCompilationUnit', 'ASTBlock', 'AstImplUtil', 'TokenUtils']
*Get the class declaration.* 匹配到的元操作或API：
query: Get the class declaration.
most similar API: get declarations of class or interface
cosine Similarity: 0.8343498706817627
*Get the methods declared in class.* 匹配到的元操作或API：
logic: Get the methods declared in class.
most similar meta operation: Get method declaration from method call
cosine Similarity: 0.8509418964385986
*Check whether method is public.* 匹配到的元操作或API：
logic: Check whether method is public.
most similar meta operation: Check whether the method is public
cosine Similarity: 0.9812466502189636
*Get the number of public methods.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number of public methods is greater than or equal to 2.* 匹配到的元操作或API：
query: Check whether the number of public methods is greater than or equal to 2.
most similar API: Check whether the method is public
cosine Similarity: 0.8013441562652588
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Some public methods
public class Foo {
    public int foo1() {return 1;}
    public int foo2() {return 1;}
    public int foo3() {return 1;}
}
The description of this test case is: bad 2
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTMethodDeclaration (method name = 'foo1')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo2')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo3')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<NodeStream<T> getDeclarations(java.lang.Class)
2. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public boolean isPublic()

1.  //Get method declaration from method call
```java
import net.sourceforge.pmd.lang.java.ast.ASTMethodCall;
import net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration;
import net.sourceforge.pmd.lang.java.symbols.JMethodSymbol;
public ASTMethodDeclaration getMethodFromMethodCall(ASTMethodCall method){
    JMethodSymbol symbol = (JMethodSymbol)method.getMethodType().getSymbol();
    ASTMethodDeclaration declaration = symbol.tryGetNode();
    return declaration;
}
```


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.design;

import java.util.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public ExcessivePublicCountRule() {
        super(ASTClassOrInterfaceDeclaration.class, ASTMethodDeclaration.class);
    }

    @Override
    public Object visit(ASTClassOrInterfaceDeclaration node, Object data) {
        int count = 0;
        for (NodeStream<JavaNode> declarations : node.getDeclarations(JavaMethod.class)) {
            ASTMethodDeclaration method = getMethodFromMethodCall((ASTMethodCall) declarations.getFirst());
            if (method != null && method.isPublic()) {
                count++;
            }
        }
        if (count > 2) {
            addViolation(this, data, node);
        }
        return null;
    }

    @Override
    public Object visit(ASTMethodDeclaration node, Object data) {
        return null;
    }

    private ASTMethodDeclaration getMethodFromMethodCall(ASTMethodCall method){
        JMethodSymbol symbol = (JMethodSymbol)method.getMethodType().getSymbol();
        ASTMethodDeclaration declaration = symbol.tryGetNode();
        return declaration;
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
==========================第4轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the class.
2. Check whether the class is public.
3. Get all methods declared in class.
4. Check whether method is public.
5. Get all fields declared in class.
6. Check whether field is public.
7. Check whether the number of public methods and fields is greater than or equal to 2.
8. If the number of public methods and fields is greater than or equal to 2, then this class is reported.
['Get the class.', 'Check whether the class is public.', 'Get all methods declared in class.', 'Check whether method is public.', 'Get all fields declared in class.', 'Check whether field is public.', 'Check whether the number of public methods and fields is greater than or equal to 2.', 'If the number of public methods and fields is greater than or equal to 2, then this class is reported.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'ASTNumericLiteral', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'TestFrameworksUtil', 'ASTFormalParameters', 'ClassNamesUtil', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'TypeConversion', 'ASTMethodDeclaration', 'ASTReturnStatement', 'ASTCompilationUnit', 'ASTBlock', 'AstImplUtil', 'TokenUtils']
*Get the class.* 匹配到的元操作或API：
query: Get the class.
most similar API: get class
cosine Similarity: 0.9400336146354675
*Check whether the class is public.* 匹配到的元操作或API：
logic: Check whether the class is public.
most similar meta operation: Check whether the class is public
cosine Similarity: 0.9849746227264404
*Get all methods declared in class.* 匹配到的元操作或API：
query: Get all methods declared in class.
most similar API: get declared annotations of method
cosine Similarity: 0.8366352915763855
*Check whether method is public.* 匹配到的元操作或API：
logic: Check whether method is public.
most similar meta operation: Check whether the method is public
cosine Similarity: 0.9812466502189636
*Get all fields declared in class.* 匹配到的元操作或API：
query: Get all fields declared in class.
most similar API: get declarations of class or interface
cosine Similarity: 0.8290456533432007
*Check whether field is public.* 匹配到的元操作或API：
logic: Check whether field is public.
most similar meta operation: Check whether the field is public
cosine Similarity: 0.9846292734146118
*Check whether the number of public methods and fields is greater than or equal to 2.* 匹配到的元操作或API：
未匹配成功元操作或API
*If the number of public methods and fields is greater than or equal to 2, then this class is reported.* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Some public methods
public class Foo {
    public int foo1() {return 1;}
    public int foo2() {return 1;}
    public int foo3() {return 1;}
}
The description of this test case is: bad 2
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTMethodDeclaration (method name = 'foo1')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo2')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo3')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.types.TypesFromReflection: public java.lang.Class<Class<?> getClass()
2. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public boolean isPublic()
3. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<ASTAnnotation> getDeclaredAnnotations()
4. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public boolean isPublic()
5. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<NodeStream<T> getDeclarations(java.lang.Class)
6. net.sourceforge.pmd.lang.java.ast.ASTFieldDeclaration: public boolean isPublic()



Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.design;

import java.util.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {

    public ExcessivePublicCountRule() {
        super(ASTClassOrInterfaceDeclaration.class);
    }

    @Override
    public Object visit(ASTClassOrInterfaceDeclaration node, Object data) {
        int publicMethods = 0;
        int publicFields = 0;
        for (Object declaration : node.getDeclarations(JavaTypes.METHOD)) {
            ASTMethodDeclaration method = (ASTMethodDeclaration) declaration;
            if (method.isPublic()) {
                publicMethods++;
            }
        }
        for (Object declaration : node.getDeclarations(JavaTypes.FIELD)) {
            ASTFieldDeclaration field = (ASTFieldDeclaration) declaration;
            if (field.isPublic()) {
                publicFields++;
            }
        }
        if (publicMethods > 2 || publicFields > 2) {
            addViolation(this, node);
        }
        return data;
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
==========================第5轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the type of node.
        2. Check whether the type is class.
        3. Get all methods and fields declared in the class.
        4. Count the number of public methods and fields.
        5. Check whether the class is public.
        6. If the class is public and the number of public methods and fields is greater than or equal to 2, then the class violates the rule.
['Get the type of node.', 'Check whether the type is class.', 'Get all methods and fields declared in the class.', 'Count the number of public methods and fields.', 'Check whether the class is public.', 'If the class is public and the number of public methods and fields is greater than or equal to 2, then the class violates the rule.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'ASTNumericLiteral', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'TestFrameworksUtil', 'ASTFormalParameters', 'ClassNamesUtil', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'TypeConversion', 'ASTMethodDeclaration', 'ASTReturnStatement', 'ASTCompilationUnit', 'ASTBlock', 'AstImplUtil', 'TokenUtils']
*Get the type of node.* 匹配到的元操作或API：
query: Get the type of node.
most similar API: get result type node of method
cosine Similarity: 0.8201417922973633
*Check whether the type is class.* 匹配到的元操作或API：
logic: Check whether the type is class.
most similar meta operation: Check whether the type of object is x class type
cosine Similarity: 0.8817264437675476
*Get all methods and fields declared in the class.* 匹配到的元操作或API：
query: Get all methods and fields declared in the class.
most similar API: get declared annotations of method
cosine Similarity: 0.8247411251068115
*Count the number of public methods and fields.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the class is public.* 匹配到的元操作或API：
logic: Check whether the class is public.
most similar meta operation: Check whether the class is public
cosine Similarity: 0.9849746227264404
*If the class is public and the number of public methods and fields is greater than or equal to 2, then the class violates the rule.* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Some public methods
public class Foo {
    public int foo1() {return 1;}
    public int foo2() {return 1;}
    public int foo3() {return 1;}
}
The description of this test case is: bad 2
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTMethodDeclaration (method name = 'foo1')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo2')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo3')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public net.sourceforge.pmd.lang.java.ast.ASTType getResultTypeNode(), //Returns the result type node of the method. This may be a {@link ASTVoidType}.
2. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<ASTAnnotation> getDeclaredAnnotations()
3. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public boolean isPublic()

1.  //Check whether the type of object is x class type
```java
import net.sourceforge.pmd.lang.java.ast.ASTConstructorCall;
import net.sourceforge.pmd.lang.java.types.TypeTestUtil;
public boolean isVariableAccessStringType(ASTConstructorCall node){
    return TypeTestUtil.isA(x.class, node);
}
```


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.design;


import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {

    @Override
    public Object visit(ASTClassOrInterfaceDeclaration node, Object data) {
        if (node.isPublic() && node.getNumberOfMethods() > 2 && !isVariableAccessStringType(node)) {
            addViolation(data, node);
        }
        return super.visit(node, data);
    }
    
    private boolean isVariableAccessStringType(ASTClassOrInterfaceDeclaration node){
        return TypeTestUtil.isA(String.class, node);
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
5轮生成的都没通过第一个测试用例，删除此测试用例，换一个生成first checker
删除此测试用例: bad 2
1423
1097
==========================第1轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the class declaration.
2. Get the number of public methods declared in class.
3. Check whether the number of public methods is greater than or equal to 2.
4. Get the number of public attributes declared in class.
5. Check whether the number of public attributes is greater than or equal to 2.
If either the number of public methods or the number of public attributes is greater than or equal to the threshold, then this class violate the rule.
['Get the class declaration.', 'Get the number of public methods declared in class.', 'Check whether the number of public methods is greater than or equal to 2.', 'Get the number of public attributes declared in class.', 'Check whether the number of public attributes is greater than or equal to 2.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'ASTNumericLiteral', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'TestFrameworksUtil', 'ASTFormalParameters', 'ClassNamesUtil', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'TypeConversion', 'ASTMethodDeclaration', 'ASTReturnStatement', 'ASTCompilationUnit', 'ASTBlock', 'AstImplUtil', 'TokenUtils']
*Get the class declaration.* 匹配到的元操作或API：
query: Get the class declaration.
most similar API: get declarations of class or interface
cosine Similarity: 0.8343498706817627
*Get the number of public methods declared in class.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number of public methods is greater than or equal to 2.* 匹配到的元操作或API：
query: Check whether the number of public methods is greater than or equal to 2.
most similar API: Check whether the method is public
cosine Similarity: 0.8013441562652588
*Get the number of public attributes declared in class.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number of public attributes is greater than or equal to 2.* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Reduced minimum
public class Foo {
    public int foo1() {return 1;}
    public int foo2() {return 1;}
    public int foo3() {return 1;}
}
The description of this test case is: bad 3
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTMethodDeclaration (method name = 'foo1')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo2')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo3')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<NodeStream<T> getDeclarations(java.lang.Class)
2. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public boolean isPublic()



Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.design;


import java.util.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {

    @Override
    public Object visit(ASTClassOrInterfaceDeclaration n, Object data) {
        int methodCount = 0;
        int fieldCount = 0;
        for (JavaNode node : n.getNodes()) {
            if (node instanceof ASTMethodDeclaration) {
                methodCount++;
            } else if (node instanceof ASTFieldDeclaration) {
                fieldCount++;
            }
        }
        if (methodCount + fieldCount > 2) {
            addViolation(data, n);
        }
        return super.visit(n, data);
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
==========================第2轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the class.
2. Check whether the class is public.
3. Get all methods declared in class.
4. Get all fields declared in class.
5. Check whether the number of public methods is greater than or equal to 2.
6. Check whether the number of public fields is greater than or equal to 2.

If the number of public methods or fields in the class is greater than or equal to 2, then the class is violating the rule.
['Get the class.', 'Check whether the class is public.', 'Get all methods declared in class.', 'Get all fields declared in class.', 'Check whether the number of public methods is greater than or equal to 2.', 'Check whether the number of public fields is greater than or equal to 2.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'ASTNumericLiteral', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'TestFrameworksUtil', 'ASTFormalParameters', 'ClassNamesUtil', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'TypeConversion', 'ASTMethodDeclaration', 'ASTReturnStatement', 'ASTCompilationUnit', 'ASTBlock', 'AstImplUtil', 'TokenUtils']
*Get the class.* 匹配到的元操作或API：
query: Get the class.
most similar API: get class
cosine Similarity: 0.9400336146354675
*Check whether the class is public.* 匹配到的元操作或API：
logic: Check whether the class is public.
most similar meta operation: Check whether the class is public
cosine Similarity: 0.9849746227264404
*Get all methods declared in class.* 匹配到的元操作或API：
query: Get all methods declared in class.
most similar API: get declared annotations of method
cosine Similarity: 0.8366352915763855
*Get all fields declared in class.* 匹配到的元操作或API：
query: Get all fields declared in class.
most similar API: get declarations of class or interface
cosine Similarity: 0.8290456533432007
*Check whether the number of public methods is greater than or equal to 2.* 匹配到的元操作或API：
query: Check whether the number of public methods is greater than or equal to 2.
most similar API: Check whether the method is public
cosine Similarity: 0.8013441562652588
*Check whether the number of public fields is greater than or equal to 2.* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Reduced minimum
public class Foo {
    public int foo1() {return 1;}
    public int foo2() {return 1;}
    public int foo3() {return 1;}
}
The description of this test case is: bad 3
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTMethodDeclaration (method name = 'foo1')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo2')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo3')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.types.TypesFromReflection: public java.lang.Class<Class<?> getClass()
2. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public boolean isPublic()
3. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<ASTAnnotation> getDeclaredAnnotations()
4. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<NodeStream<T> getDeclarations(java.lang.Class)
5. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public boolean isPublic()



Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.design;

import java.util.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {

    private static final int DEFAULT_THRESHOLD = 2;

    public ExcessivePublicCountRule() {
        super(ASTClassOrInterfaceDeclaration.class);
    }

    @Override
    public Object visit(ASTClassOrInterfaceDeclaration node, Object data) {
        int publicMethodCount = 0;
        int publicFieldCount = 0;

        for (JavaNode member : node.getJavaCodeElements().stream()
                .filter(nodeType -> nodeType instanceof ASTMethodDeclaration || nodeType instanceof ASTFieldDeclaration)
                .flatMap(nodeType -> {
                    if (nodeType instanceof ASTMethodDeclaration) {
                        ASTMethodDeclaration method = (ASTMethodDeclaration) nodeType;
                        return method.getJavaCodeElements().stream()
                                .filter(jce -> jce instanceof ASTModifier && ((ASTModifier) jce).getText().equals("public"));
                    } else if (nodeType instanceof ASTFieldDeclaration) {
                        ASTFieldDeclaration field = (ASTFieldDeclaration) nodeType;
                        return field.getJavaCodeElements().stream()
                                .filter(jce -> jce instanceof ASTModifier && ((ASTModifier) jce).getText().equals("public"));
                    } else {
                        return Stream.empty();
                    }
                })
                .collect(Collectors.toList())) {
            if (member instanceof ASTMethodDeclaration) {
                publicMethodCount++;
            } else if (member instanceof ASTFieldDeclaration) {
                publicFieldCount++;
            }
        }

        if (publicMethodCount + publicFieldCount > DEFAULT_THRESHOLD) {
            return addViolation(this, data, (ASTNode) node);
        }

        return super.visit(node, data);
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
==========================第3轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the class.
2. Check whether the class has public methods.
3. Get all public methods declared in the class.
4. Check the number of public methods.
5. Check whether the number of public methods exceeds the threshold (2).
6. Check whether the class has public fields.
7. Get all public fields declared in the class.
8. Check the number of public fields.
9. Check whether the number of public fields exceeds the threshold (2).
10. Check whether the class has both public methods and public fields.
['Get the class.', 'Check whether the class has public methods.', 'Get all public methods declared in the class.', 'Check the number of public methods.', 'Check whether the number of public methods exceeds the threshold (2).', 'Check whether the class has public fields.', 'Get all public fields declared in the class.', 'Check the number of public fields.', 'Check whether the number of public fields exceeds the threshold (2).', 'Check whether the class has both public methods and public fields.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'ASTNumericLiteral', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'TestFrameworksUtil', 'ASTFormalParameters', 'ClassNamesUtil', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'TypeConversion', 'ASTMethodDeclaration', 'ASTReturnStatement', 'ASTCompilationUnit', 'ASTBlock', 'AstImplUtil', 'TokenUtils']
*Get the class.* 匹配到的元操作或API：
query: Get the class.
most similar API: get class
cosine Similarity: 0.9400336146354675
*Check whether the class has public methods.* 匹配到的元操作或API：
logic: Check whether the class has public methods.
most similar meta operation: Check whether the method is public
cosine Similarity: 0.9098904728889465
*Get all public methods declared in the class.* 匹配到的元操作或API：
query: Get all public methods declared in the class.
most similar API: get declared annotations of method
cosine Similarity: 0.8227982521057129
*Check the number of public methods.* 匹配到的元操作或API：
query: Check the number of public methods.
most similar API: Check whether the method is public
cosine Similarity: 0.8408716320991516
*Check whether the number of public methods exceeds the threshold (2).* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the class has public fields.* 匹配到的元操作或API：
logic: Check whether the class has public fields.
most similar meta operation: Check whether the class is public
cosine Similarity: 0.9111320972442627
*Get all public fields declared in the class.* 匹配到的元操作或API：
query: Get all public fields declared in the class.
most similar API: get declarations of class or interface
cosine Similarity: 0.8007969260215759
*Check the number of public fields.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number of public fields exceeds the threshold (2).* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the class has both public methods and public fields.* 匹配到的元操作或API：
query: Check whether the class has both public methods and public fields.
most similar API: Check whether the method is public
cosine Similarity: 0.8375392556190491
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Reduced minimum
public class Foo {
    public int foo1() {return 1;}
    public int foo2() {return 1;}
    public int foo3() {return 1;}
}
The description of this test case is: bad 3
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTMethodDeclaration (method name = 'foo1')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo2')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo3')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.types.TypesFromReflection: public java.lang.Class<Class<?> getClass()
2. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public boolean isPublic()
3. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<ASTAnnotation> getDeclaredAnnotations()
4. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public boolean isPublic()
5. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<NodeStream<T> getDeclarations(java.lang.Class)



Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.design;

import java.util.*;
import java.lang.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {

    public ExcessivePublicCountRule() {
        super();
    }

    @Override
    public Object visit(ASTClassOrInterfaceDeclaration node, Object data) {
        if (node.isPublic()) {
            int publicMethodsCount = countPublicMethods(node);
            int publicFieldsCount = countPublicFields(node);
            if (publicMethodsCount + publicFieldsCount > 2) {
                addViolation(this, data, node);
            }
        }
        return super.visit(node, data);
    }

    private int countPublicMethods(ASTClassOrInterfaceDeclaration classNode) {
        int count = 0;
        for (NodeStream<ASTMethodDeclaration> methods : classNode.getDeclarations(ASTMethodDeclaration.class)) {
            if (methods.isPublic() && !(methods.getFirstChild() instanceof ASTConstructorDeclaration)) {
                count++;
            }
        }
        return count;
    }

    private int countPublicFields(ASTClassOrInterfaceDeclaration classNode) {
        int count = 0;
        for (NodeStream<ASTFieldDeclaration> fields : classNode.getDeclarations(ASTFieldDeclaration.class)) {
            if (fields.isPublic()) {
                count++;
            }
        }
        return count;
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
==========================第4轮为第一个测试用例生成checker========================
=========================logics=========================
1. Check whether the class is public.
        2. Get all methods declared in the class.
        3. Get all fields declared in the class.
        4. Check whether the number of methods is greater than or equal to 2.
        5. Check whether the number of fields is greater than or equal to 2.
        6. If the class is public and the number of methods or fields is greater than or equal to 2, then report the class as violating the rule.
['Check whether the class is public.', 'Get all methods declared in the class.', 'Get all fields declared in the class.', 'Check whether the number of methods is greater than or equal to 2.', 'Check whether the number of fields is greater than or equal to 2.', 'If the class is public and the number of methods or fields is greater than or equal to 2, then report the class as violating the rule.']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'ASTNumericLiteral', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'TestFrameworksUtil', 'ASTFormalParameters', 'ClassNamesUtil', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'TypeConversion', 'ASTMethodDeclaration', 'ASTReturnStatement', 'ASTCompilationUnit', 'ASTBlock', 'AstImplUtil', 'TokenUtils']
*Check whether the class is public.* 匹配到的元操作或API：
logic: Check whether the class is public.
most similar meta operation: Check whether the class is public
cosine Similarity: 0.9849746227264404
*Get all methods declared in the class.* 匹配到的元操作或API：
query: Get all methods declared in the class.
most similar API: get declared annotations of method
cosine Similarity: 0.837310254573822
*Get all fields declared in the class.* 匹配到的元操作或API：
query: Get all fields declared in the class.
most similar API: get declarations of class or interface
cosine Similarity: 0.8209157586097717
*Check whether the number of methods is greater than or equal to 2.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number of fields is greater than or equal to 2.* 匹配到的元操作或API：
未匹配成功元操作或API
*If the class is public and the number of methods or fields is greater than or equal to 2, then report the class as violating the rule.* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Reduced minimum
public class Foo {
    public int foo1() {return 1;}
    public int foo2() {return 1;}
    public int foo3() {return 1;}
}
The description of this test case is: bad 3
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTMethodDeclaration (method name = 'foo1')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo2')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo3')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public boolean isPublic()
2. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<ASTAnnotation> getDeclaredAnnotations()
3. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<NodeStream<T> getDeclarations(java.lang.Class)



Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


出现语法错误，这一轮舍弃，直接重新生成
==========================第5轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the type of the node (class/interface).
2. Check whether the type is class.
3. Get all methods declared in class.
4. Check whether the method is public.
5. Get all fields declared in class.
6. Check whether the field is public.
7. Check the number of public methods and fields in the class.
8. Check whether the number of public methods and fields is greater than or equal to the threshold (2).
If the number of public methods and fields in the class is greater than or equal to the threshold, then this test case violate the rule.
['Get the type of the node (class/interface).', 'Check whether the type is class.', 'Get all methods declared in class.', 'Check whether the method is public.', 'Get all fields declared in class.', 'Check whether the field is public.', 'Check the number of public methods and fields in the class.', 'Check whether the number of public methods and fields is greater than or equal to the threshold (2).']
['ASTModifierList', 'JavadocTag', 'InternalApiBridge', 'ASTClassOrInterfaceDeclaration', 'SymbolicValueHelper', 'ASTPrimitiveType', 'TypesFromReflection', 'TypeTestUtil', 'ASTNumericLiteral', 'JavaRuleUtil', 'TypesFromAst', 'JavaSemanticErrors', 'JavaPropertyUtil', 'TestFrameworksUtil', 'ASTFormalParameters', 'ClassNamesUtil', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaAstUtils', 'CommentAssignmentPass', 'TypeConversion', 'ASTMethodDeclaration', 'ASTReturnStatement', 'ASTCompilationUnit', 'ASTBlock', 'AstImplUtil', 'TokenUtils']
*Get the type of the node (class/interface).* 匹配到的元操作或API：
query: Get the type of the node (class/interface).
most similar API: get super class type node of class or interface
cosine Similarity: 0.8802793025970459
*Check whether the type is class.* 匹配到的元操作或API：
logic: Check whether the type is class.
most similar meta operation: Check whether the type of object is x class type
cosine Similarity: 0.8817264437675476
*Get all methods declared in class.* 匹配到的元操作或API：
query: Get all methods declared in class.
most similar API: get declared annotations of method
cosine Similarity: 0.8366352915763855
*Check whether the method is public.* 匹配到的元操作或API：
logic: Check whether the method is public.
most similar meta operation: Check whether the method is public
cosine Similarity: 0.982057511806488
*Get all fields declared in class.* 匹配到的元操作或API：
query: Get all fields declared in class.
most similar API: get declarations of class or interface
cosine Similarity: 0.8290456533432007
*Check whether the field is public.* 匹配到的元操作或API：
logic: Check whether the field is public.
most similar meta operation: Check whether the field is public
cosine Similarity: 0.9851202964782715
*Check the number of public methods and fields in the class.* 匹配到的元操作或API：
未匹配成功元操作或API
*Check whether the number of public methods and fields is greater than or equal to the threshold (2).* 匹配到的元操作或API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Classes with large numbers of public methods and attributes require disproportionate testing efforts since combinational side effects grow rapidly and increase risk. The default threshold above which a node is reported is 2.;
The test case corresponding to the rule:
```
// Reduced minimum
public class Foo {
    public int foo1() {return 1;}
    public int foo2() {return 1;}
    public int foo3() {return 1;}
}
The description of this test case is: bad 3
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTMethodDeclaration (method name = 'foo1')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo2')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral
    ——ASTMethodDeclaration (method name = 'foo3')
      ——ASTModifierList
      ——ASTPrimitiveType (method return type = 'int')
      ——ASTFormalParameters (size = 0)
      ——ASTBlock
        ——ASTReturnStatement
          ——ASTNumericLiteral

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.design;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceType getSuperClassTypeNode(), //Returns the superclass type node if this node is a class declaration and explicitly declares an {@code extends} clause. Superinterfaces of an interface are not considered. <p>Returns {@code null} otherwise.
2. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<ASTAnnotation> getDeclaredAnnotations()
3. net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration: public boolean isPublic()
4. net.sourceforge.pmd.lang.java.ast.ASTClassOrInterfaceDeclaration: public net.sourceforge.pmd.lang.ast.NodeStream<NodeStream<T> getDeclarations(java.lang.Class)
5. net.sourceforge.pmd.lang.java.ast.ASTFieldDeclaration: public boolean isPublic()

1.  //Check whether the type of object is x class type
```java
import net.sourceforge.pmd.lang.java.ast.ASTConstructorCall;
import net.sourceforge.pmd.lang.java.types.TypeTestUtil;
public boolean isVariableAccessStringType(ASTConstructorCall node){
    return TypeTestUtil.isA(x.class, node);
}
```


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.design;

import java.util.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class ExcessivePublicCountRule extends AbstractJavaRulechainRule {

    public ExcessivePublicCountRule() {
        super(ASTClassOrInterfaceDeclaration.class);
    }

    @Override
    public Object visit(ASTClassOrInterfaceDeclaration node, Object data) {
        int publicMethodCount = 0;
        int publicFieldCount = 0;
        
        // Check whether ASTMethodDeclaration or ASTFieldDeclaration is of MethodDeclaration.class type
        for (NodeStream<ASTMethodDeclaration> methods : node.getDeclarations(MethodDeclaration.class)) {
            if (methods.getChild(0) instanceof ASTModifierList && methods.getChild(0).getChild(0) instanceof ASTKeyword && ((ASTKeyword) methods.getChild(0).getChild(0)).getImage().equals("public")) {
                publicMethodCount++;
            }
        }
        
        // Check whether ASTFieldDeclaration is of FieldDeclaration.class type
        for (NodeStream<ASTFieldDeclaration> fields : node.getDeclarations(FieldDeclaration.class)) {
            if (fields.getChild(0) instanceof ASTModifierList && fields.getChild(0).getChild(0) instanceof ASTKeyword && ((ASTKeyword) fields.getChild(0).getChild(0)).getImage().equals("public")) {
                publicFieldCount++;
            }
        }
        
        if (publicMethodCount >= 2 || publicFieldCount >= 2) {
            // report the issue
            addViolation(data, this, node);
        }
        return super.visit(node, data);
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
5轮生成的都没通过第一个测试用例，删除此测试用例，换一个生成first checker
删除此测试用例: bad 3


======================接下来开始迭代=====================
为反例生成first checker失败
结束

规则执行完毕，时间总花销： 1480.7303812503815 秒

