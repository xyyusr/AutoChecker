开始

========================================== Rule IdenticalCatchBranchesRule ===========================================
一共 7 个测试用例
正例 5 个
反例 2 个
1684
1319
==========================第1轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get all `catch` blocks in the `try` statement.
2. Check whether there are multiple `catch` blocks.
3. For each `catch` block, get the exception type being caught.
4. For each `catch` block, get the body of the `catch` block.
5. Compare the bodies of all `catch` blocks to check if they are identical.
6. Check whether the exception types in the `catch` blocks are different.
7. If there are multiple `catch` blocks with identical bodies but different exception types, check if they can be collapsed into a single multi-catch block.

In this test case:
- There are two `catch` blocks (`IllegalArgumentException` and `IllegalStateException`).
- The bodies of both `catch` blocks are identical (`throw e;`).
- The exception types are different.
- These `catch` blocks can be collapsed into a single multi-catch block.

Thus, this test case violates the rule. The number of violations is 1.
['Get all `catch` blocks in the `try` statement.', 'Check whether there are multiple `catch` blocks.', 'For each `catch` block, get the exception type being caught.', 'For each `catch` block, get the body of the `catch` block.', 'Compare the bodies of all `catch` blocks to check if they are identical.', 'Check whether the exception types in the `catch` blocks are different.', 'If there are multiple `catch` blocks with identical bodies but different exception types, check if they can be collapsed into a single multi-catch block.']
['ASTClassOrInterfaceDeclaration', 'CommentAssignmentPass', 'ASTCatchParameter', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaPropertyUtil', 'ASTVariableAccess', 'ASTInitializer', 'JavadocTag', 'TokenUtils', 'ASTCompilationUnit', 'SymbolicValueHelper', 'TypesFromAst', 'JavaSemanticErrors', 'ASTCatchClause', 'JavaRuleUtil', 'AstImplUtil', 'ClassNamesUtil', 'InternalApiBridge', 'ASTTryStatement', 'TypesFromReflection', 'ASTThrowStatement', 'ASTBlock', 'ASTVariableDeclaratorId', 'ASTModifierList', 'ASTClassOrInterfaceType', 'JavaAstUtils', 'TypeConversion', 'TypeTestUtil', 'TestFrameworksUtil']
*Get all `catch` blocks in the `try` statement.* 匹配到的API：
query: Get all `catch` blocks in the `try` statement.
most similar API: get catch clauses of try statement
cosine Similarity: 0.8751448392868042
*Check whether there are multiple `catch` blocks.* 匹配到的API：
query: Check whether there are multiple `catch` blocks.
most similar API: Check whether the catch parameter is multicatch
cosine Similarity: 0.858930230140686
*For each `catch` block, get the exception type being caught.* 匹配到的API：
query: For each `catch` block, get the exception type being caught.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.8676562309265137
*For each `catch` block, get the body of the `catch` block.* 匹配到的API：
query: For each `catch` block, get the body of the `catch` block.
most similar API: get body of catch clause
cosine Similarity: 0.8456545472145081
*Compare the bodies of all `catch` blocks to check if they are identical.* 匹配到的API：
query: Compare the bodies of all `catch` blocks to check if they are identical.
most similar API: Check whether the catch clause equals
cosine Similarity: 0.8021183013916016
*Check whether the exception types in the `catch` blocks are different.* 匹配到的API：
query: Check whether the exception types in the `catch` blocks are different.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.8128100037574768
*If there are multiple `catch` blocks with identical bodies but different exception types, check if they can be collapsed into a single multi-catch block.* 匹配到的API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Identical catch branches use up vertical space and increase the complexity of code without adding functionality. It’s better style to collapse identical branches into a single multi-catch branch.;
The test case corresponding to the rule:
```
// Collapsible statement
class Foo {
    {
        try {
            // do something
        } catch (IllegalArgumentException e) {
            throw e;
        } catch (IllegalStateException e) { // Can be collapsed into the previous block
            throw e;
        }
    }
}
The description of this test case is: bad 1
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTInitializer
      ——ASTBlock
        ——ASTTryStatement
          ——ASTBlock
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTVariableAccess (referenced variable name = 'e')
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTVariableAccess (referenced variable name = 'e')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.codestyle;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTTryStatement: public net.sourceforge.pmd.lang.ast.NodeStream<ASTCatchClause> getCatchClauses(), //Returns the catch statement nodes of this try statement. If there are none, returns an empty list.
2. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public boolean isMulticatch(), //Returns true if this is a multi-catch parameter, that is, it catches several unrelated exception types at the same time. For example: <pre>catch (IllegalStateException | IllegalArgumentException e) {}</pre>
3. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public net.sourceforge.pmd.lang.ast.NodeStream<ASTClassOrInterfaceType> getAllExceptionTypes(), //Returns a stream of all declared exception types (expanding a union type if present). <p>Note that this is the only reliable way to inspect multi-catch clauses, as the type mirror of a {@link ASTUnionType} is not itself a {@link JIntersectionType}, but the {@link TypeSystem#lub(Collection) LUB} of the components. Since exception types cannot be interfaces, the LUB always erases to a single class supertype (eg {@link RuntimeException}).
4. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public net.sourceforge.pmd.lang.java.ast.ASTBlock getBody(), //Returns the body of this catch branch.
5. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public boolean equals(java.lang.Object)


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.codestyle;

import java.util.*;
import java.lang.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public IdenticalCatchBranchesRule() {
        super(ASTTryStatement.class);
    }

    @Override
    public Object visit(ASTTryStatement node, Object data) {
        NodeStream<ASTCatchClause> catchClauses = node.getCatchClauses();
        if (catchClauses.size() < 2) {
            return super.visit(node, data);
        }

        ASTCatchClause previousCatch = null;
        for (ASTCatchClause catchClause : catchClauses) {
            if (previousCatch != null && catchClause.getBody().equals(previousCatch.getBody())) {
                addViolation(data, catchClause);
            }
            previousCatch = catchClause;
        }

        return super.visit(node, data);
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
==========================第2轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get all catch blocks in the try-catch statement.
2. Check whether there are multiple catch blocks.
3. For each catch block, get the exception type being caught.
4. Check whether the exception types are different.
5. For each catch block, get the body of the catch block.
6. Check whether the bodies of the catch blocks are identical.
7. Check whether the catch blocks can be collapsed into a single multi-catch block.

If there are multiple catch blocks with identical bodies and different exception types that can be collapsed into a single multi-catch block, then this test case violates the rule. In this case, the test case violates the rule once.
['Get all catch blocks in the try-catch statement.', 'Check whether there are multiple catch blocks.', 'For each catch block, get the exception type being caught.', 'Check whether the exception types are different.', 'For each catch block, get the body of the catch block.', 'Check whether the bodies of the catch blocks are identical.', 'Check whether the catch blocks can be collapsed into a single multi-catch block.']
['ASTClassOrInterfaceDeclaration', 'CommentAssignmentPass', 'ASTCatchParameter', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaPropertyUtil', 'ASTVariableAccess', 'ASTInitializer', 'JavadocTag', 'TokenUtils', 'ASTCompilationUnit', 'SymbolicValueHelper', 'TypesFromAst', 'JavaSemanticErrors', 'ASTCatchClause', 'JavaRuleUtil', 'AstImplUtil', 'ClassNamesUtil', 'InternalApiBridge', 'ASTTryStatement', 'TypesFromReflection', 'ASTThrowStatement', 'ASTBlock', 'ASTVariableDeclaratorId', 'ASTModifierList', 'ASTClassOrInterfaceType', 'JavaAstUtils', 'TypeConversion', 'TypeTestUtil', 'TestFrameworksUtil']
*Get all catch blocks in the try-catch statement.* 匹配到的API：
query: Get all catch blocks in the try-catch statement.
most similar API: get catch clauses of try statement
cosine Similarity: 0.8611595034599304
*Check whether there are multiple catch blocks.* 匹配到的API：
query: Check whether there are multiple catch blocks.
most similar API: Check whether the catch parameter is multicatch
cosine Similarity: 0.8584250211715698
*For each catch block, get the exception type being caught.* 匹配到的API：
query: For each catch block, get the exception type being caught.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.8730904459953308
*Check whether the exception types are different.* 匹配到的API：
query: Check whether the exception types are different.
most similar API: Check whether has exception list
cosine Similarity: 0.812656819820404
*For each catch block, get the body of the catch block.* 匹配到的API：
query: For each catch block, get the body of the catch block.
most similar API: get body of catch clause
cosine Similarity: 0.8557538986206055
*Check whether the bodies of the catch blocks are identical.* 匹配到的API：
未匹配成功元操作或API
*Check whether the catch blocks can be collapsed into a single multi-catch block.* 匹配到的API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Identical catch branches use up vertical space and increase the complexity of code without adding functionality. It’s better style to collapse identical branches into a single multi-catch branch.;
The test case corresponding to the rule:
```
// Collapsible statement
class Foo {
    {
        try {
            // do something
        } catch (IllegalArgumentException e) {
            throw e;
        } catch (IllegalStateException e) { // Can be collapsed into the previous block
            throw e;
        }
    }
}
The description of this test case is: bad 1
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTInitializer
      ——ASTBlock
        ——ASTTryStatement
          ——ASTBlock
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTVariableAccess (referenced variable name = 'e')
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTVariableAccess (referenced variable name = 'e')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.codestyle;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTTryStatement: public net.sourceforge.pmd.lang.ast.NodeStream<ASTCatchClause> getCatchClauses(), //Returns the catch statement nodes of this try statement. If there are none, returns an empty list.
2. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public boolean isMulticatch(), //Returns true if this is a multi-catch parameter, that is, it catches several unrelated exception types at the same time. For example: <pre>catch (IllegalStateException | IllegalArgumentException e) {}</pre>
3. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public net.sourceforge.pmd.lang.ast.NodeStream<ASTClassOrInterfaceType> getAllExceptionTypes(), //Returns a stream of all declared exception types (expanding a union type if present). <p>Note that this is the only reliable way to inspect multi-catch clauses, as the type mirror of a {@link ASTUnionType} is not itself a {@link JIntersectionType}, but the {@link TypeSystem#lub(Collection) LUB} of the components. Since exception types cannot be interfaces, the LUB always erases to a single class supertype (eg {@link RuntimeException}).
4. net.sourceforge.pmd.lang.java.ast.internal.JavaAstUtils: static public boolean hasExceptionList(net.sourceforge.pmd.lang.java.ast.ASTMethodOrConstructorDeclaration, [Ljava.lang.Class;)
5. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public net.sourceforge.pmd.lang.java.ast.ASTBlock getBody(), //Returns the body of this catch branch.


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.codestyle;


import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public IdenticalCatchBranchesRule() {
        super(ASTTryStatement.class);
    }

    @Override
    public Object visit(ASTTryStatement node, Object data) {
        NodeStream<ASTCatchClause> catchClauses = node.getCatchClauses();
        if (catchClauses.count() > 1) {
            ASTCatchClause previousCatch = null;
            for (ASTCatchClause catchClause : catchClauses) {
                if (previousCatch != null && areCatchBranchesIdentical(previousCatch, catchClause)) {
                    addViolation(data, catchClause);
                }
                previousCatch = catchClause;
            }
        }
        return super.visit(node, data);
    }

    private boolean areCatchBranchesIdentical(ASTCatchClause catch1, ASTCatchClause catch2) {
        return catch1.getBody().toString().equals(catch2.getBody().toString());
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
True
编译通过
测试用例是否通过：
False
==========================第3轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get all `catch` blocks in the `try` statement.
2. Check whether there are multiple `catch` blocks.
3. For each `catch` block, get the exception type being caught.
4. For each `catch` block, get the body of the `catch` block.
5. Compare the bodies of all `catch` blocks to check if they are identical.
6. Check whether the exception types in the `catch` blocks are different.
7. If there are multiple `catch` blocks with identical bodies but different exception types, check if they can be collapsed into a single multi-catch block.

If the test case has multiple `catch` blocks with identical bodies but different exception types, and they can be collapsed into a single multi-catch block, then this test case violates the rule. The number of violations in this test case is 1.
['Get all `catch` blocks in the `try` statement.', 'Check whether there are multiple `catch` blocks.', 'For each `catch` block, get the exception type being caught.', 'For each `catch` block, get the body of the `catch` block.', 'Compare the bodies of all `catch` blocks to check if they are identical.', 'Check whether the exception types in the `catch` blocks are different.', 'If there are multiple `catch` blocks with identical bodies but different exception types, check if they can be collapsed into a single multi-catch block.']
['ASTClassOrInterfaceDeclaration', 'CommentAssignmentPass', 'ASTCatchParameter', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaPropertyUtil', 'ASTVariableAccess', 'ASTInitializer', 'JavadocTag', 'TokenUtils', 'ASTCompilationUnit', 'SymbolicValueHelper', 'TypesFromAst', 'JavaSemanticErrors', 'ASTCatchClause', 'JavaRuleUtil', 'AstImplUtil', 'ClassNamesUtil', 'InternalApiBridge', 'ASTTryStatement', 'TypesFromReflection', 'ASTThrowStatement', 'ASTBlock', 'ASTVariableDeclaratorId', 'ASTModifierList', 'ASTClassOrInterfaceType', 'JavaAstUtils', 'TypeConversion', 'TypeTestUtil', 'TestFrameworksUtil']
*Get all `catch` blocks in the `try` statement.* 匹配到的API：
query: Get all `catch` blocks in the `try` statement.
most similar API: get catch clauses of try statement
cosine Similarity: 0.8751448392868042
*Check whether there are multiple `catch` blocks.* 匹配到的API：
query: Check whether there are multiple `catch` blocks.
most similar API: Check whether the catch parameter is multicatch
cosine Similarity: 0.858930230140686
*For each `catch` block, get the exception type being caught.* 匹配到的API：
query: For each `catch` block, get the exception type being caught.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.8676562309265137
*For each `catch` block, get the body of the `catch` block.* 匹配到的API：
query: For each `catch` block, get the body of the `catch` block.
most similar API: get body of catch clause
cosine Similarity: 0.8456545472145081
*Compare the bodies of all `catch` blocks to check if they are identical.* 匹配到的API：
query: Compare the bodies of all `catch` blocks to check if they are identical.
most similar API: Check whether the catch clause equals
cosine Similarity: 0.8021183013916016
*Check whether the exception types in the `catch` blocks are different.* 匹配到的API：
query: Check whether the exception types in the `catch` blocks are different.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.8128100037574768
*If there are multiple `catch` blocks with identical bodies but different exception types, check if they can be collapsed into a single multi-catch block.* 匹配到的API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Identical catch branches use up vertical space and increase the complexity of code without adding functionality. It’s better style to collapse identical branches into a single multi-catch branch.;
The test case corresponding to the rule:
```
// Collapsible statement
class Foo {
    {
        try {
            // do something
        } catch (IllegalArgumentException e) {
            throw e;
        } catch (IllegalStateException e) { // Can be collapsed into the previous block
            throw e;
        }
    }
}
The description of this test case is: bad 1
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTInitializer
      ——ASTBlock
        ——ASTTryStatement
          ——ASTBlock
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTVariableAccess (referenced variable name = 'e')
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTVariableAccess (referenced variable name = 'e')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.codestyle;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTTryStatement: public net.sourceforge.pmd.lang.ast.NodeStream<ASTCatchClause> getCatchClauses(), //Returns the catch statement nodes of this try statement. If there are none, returns an empty list.
2. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public boolean isMulticatch(), //Returns true if this is a multi-catch parameter, that is, it catches several unrelated exception types at the same time. For example: <pre>catch (IllegalStateException | IllegalArgumentException e) {}</pre>
3. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public net.sourceforge.pmd.lang.ast.NodeStream<ASTClassOrInterfaceType> getAllExceptionTypes(), //Returns a stream of all declared exception types (expanding a union type if present). <p>Note that this is the only reliable way to inspect multi-catch clauses, as the type mirror of a {@link ASTUnionType} is not itself a {@link JIntersectionType}, but the {@link TypeSystem#lub(Collection) LUB} of the components. Since exception types cannot be interfaces, the LUB always erases to a single class supertype (eg {@link RuntimeException}).
4. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public net.sourceforge.pmd.lang.java.ast.ASTBlock getBody(), //Returns the body of this catch branch.
5. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public boolean equals(java.lang.Object)


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.codestyle;


import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public IdenticalCatchBranchesRule() {
        super(ASTTryStatement.class);
    }

    @Override
    public Object visit(ASTTryStatement node, Object data) {
        NodeStream<ASTCatchClause> catchClauses = node.getCatchClauses();
        if (catchClauses.count() > 1) {
            ASTCatchClause previousCatch = null;
            for (ASTCatchClause catchClause : catchClauses) {
                if (previousCatch != null && areCatchBranchesIdentical(previousCatch, catchClause)) {
                    addViolation(data, catchClause);
                }
                previousCatch = catchClause;
            }
        }
        return super.visit(node, data);
    }

    private boolean areCatchBranchesIdentical(ASTCatchClause catch1, ASTCatchClause catch2) {
        return catch1.getBody().equals(catch2.getBody());
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
True
编译通过
测试用例是否通过：
False
==========================第4轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get all catch blocks in the try statement.
2. Check whether there are multiple catch blocks.
3. For each catch block, get the exception type.
4. Check whether the exception types are different.
5. For each catch block, get the body of the catch block.
6. Check whether the bodies of the catch blocks are identical.
7. If there are multiple catch blocks with different exception types but identical bodies, then this test case violates the rule.

In this test case:
- There are two catch blocks (`IllegalArgumentException` and `IllegalStateException`).
- The bodies of both catch blocks are identical (`throw e;`).
- Therefore, this test case violates the rule. The number of violations is 1.
['Get all catch blocks in the try statement.', 'Check whether there are multiple catch blocks.', 'For each catch block, get the exception type.', 'Check whether the exception types are different.', 'For each catch block, get the body of the catch block.', 'Check whether the bodies of the catch blocks are identical.', 'If there are multiple catch blocks with different exception types but identical bodies, then this test case violates the rule.']
['ASTClassOrInterfaceDeclaration', 'CommentAssignmentPass', 'ASTCatchParameter', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaPropertyUtil', 'ASTVariableAccess', 'ASTInitializer', 'JavadocTag', 'TokenUtils', 'ASTCompilationUnit', 'SymbolicValueHelper', 'TypesFromAst', 'JavaSemanticErrors', 'ASTCatchClause', 'JavaRuleUtil', 'AstImplUtil', 'ClassNamesUtil', 'InternalApiBridge', 'ASTTryStatement', 'TypesFromReflection', 'ASTThrowStatement', 'ASTBlock', 'ASTVariableDeclaratorId', 'ASTModifierList', 'ASTClassOrInterfaceType', 'JavaAstUtils', 'TypeConversion', 'TypeTestUtil', 'TestFrameworksUtil']
*Get all catch blocks in the try statement.* 匹配到的API：
query: Get all catch blocks in the try statement.
most similar API: get catch clauses of try statement
cosine Similarity: 0.8826898336410522
*Check whether there are multiple catch blocks.* 匹配到的API：
query: Check whether there are multiple catch blocks.
most similar API: Check whether the catch parameter is multicatch
cosine Similarity: 0.8584250211715698
*For each catch block, get the exception type.* 匹配到的API：
query: For each catch block, get the exception type.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.882443368434906
*Check whether the exception types are different.* 匹配到的API：
query: Check whether the exception types are different.
most similar API: Check whether has exception list
cosine Similarity: 0.812656819820404
*For each catch block, get the body of the catch block.* 匹配到的API：
query: For each catch block, get the body of the catch block.
most similar API: get body of catch clause
cosine Similarity: 0.8557538986206055
*Check whether the bodies of the catch blocks are identical.* 匹配到的API：
未匹配成功元操作或API
*If there are multiple catch blocks with different exception types but identical bodies, then this test case violates the rule.* 匹配到的API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Identical catch branches use up vertical space and increase the complexity of code without adding functionality. It’s better style to collapse identical branches into a single multi-catch branch.;
The test case corresponding to the rule:
```
// Collapsible statement
class Foo {
    {
        try {
            // do something
        } catch (IllegalArgumentException e) {
            throw e;
        } catch (IllegalStateException e) { // Can be collapsed into the previous block
            throw e;
        }
    }
}
The description of this test case is: bad 1
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTInitializer
      ——ASTBlock
        ——ASTTryStatement
          ——ASTBlock
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTVariableAccess (referenced variable name = 'e')
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTVariableAccess (referenced variable name = 'e')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.codestyle;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTTryStatement: public net.sourceforge.pmd.lang.ast.NodeStream<ASTCatchClause> getCatchClauses(), //Returns the catch statement nodes of this try statement. If there are none, returns an empty list.
2. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public boolean isMulticatch(), //Returns true if this is a multi-catch parameter, that is, it catches several unrelated exception types at the same time. For example: <pre>catch (IllegalStateException | IllegalArgumentException e) {}</pre>
3. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public net.sourceforge.pmd.lang.ast.NodeStream<ASTClassOrInterfaceType> getAllExceptionTypes(), //Returns a stream of all declared exception types (expanding a union type if present). <p>Note that this is the only reliable way to inspect multi-catch clauses, as the type mirror of a {@link ASTUnionType} is not itself a {@link JIntersectionType}, but the {@link TypeSystem#lub(Collection) LUB} of the components. Since exception types cannot be interfaces, the LUB always erases to a single class supertype (eg {@link RuntimeException}).
4. net.sourceforge.pmd.lang.java.ast.internal.JavaAstUtils: static public boolean hasExceptionList(net.sourceforge.pmd.lang.java.ast.ASTMethodOrConstructorDeclaration, [Ljava.lang.Class;)
5. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public net.sourceforge.pmd.lang.java.ast.ASTBlock getBody(), //Returns the body of this catch branch.


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.codestyle;

import java.util.*;
import java.lang.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public IdenticalCatchBranchesRule() {
        super(ASTTryStatement.class);
    }

    @Override
    public Object visit(ASTTryStatement node, Object data) {
        NodeStream<ASTCatchClause> catchClauses = node.getCatchClauses();
        if (catchClauses.count() < 2) {
            return super.visit(node, data);
        }

        List<ASTCatchClause> clauses = catchClauses.toList();
        for (int i = 0; i < clauses.size() - 1; i++) {
            ASTCatchClause current = clauses.get(i);
            ASTCatchClause next = clauses.get(i + 1);

            if (areCatchBodiesIdentical(current, next)) {
                addViolation(data, next);
            }
        }

        return super.visit(node, data);
    }

    private boolean areCatchBodiesIdentical(ASTCatchClause first, ASTCatchClause second) {
        ASTBlock firstBody = first.getBody();
        ASTBlock secondBody = second.getBody();

        if (firstBody.getNumChildren() != secondBody.getNumChildren()) {
            return false;
        }

        for (int i = 0; i < firstBody.getNumChildren(); i++) {
            JavaNode firstChild = firstBody.getChild(i);
            JavaNode secondChild = secondBody.getChild(i);

            if (!firstChild.getText().equals(secondChild.getText())) {
                return false;
            }
        }

        return true;
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
True
编译通过
测试用例是否通过：
False
==========================第5轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get all catch blocks in the try-catch statement.
2. Check whether there are multiple catch blocks.
3. For each catch block, get the exception type being caught.
4. Check whether the exception types are different.
5. For each catch block, get the body of the catch block.
6. Check whether the bodies of the catch blocks are identical.
7. Check whether the catch blocks can be collapsed into a single multi-catch block.

If there are multiple catch blocks with identical bodies and different exception types that can be collapsed into a single multi-catch block, then this test case violates the rule. In this case, the test case violates the rule once.
['Get all catch blocks in the try-catch statement.', 'Check whether there are multiple catch blocks.', 'For each catch block, get the exception type being caught.', 'Check whether the exception types are different.', 'For each catch block, get the body of the catch block.', 'Check whether the bodies of the catch blocks are identical.', 'Check whether the catch blocks can be collapsed into a single multi-catch block.']
['ASTClassOrInterfaceDeclaration', 'CommentAssignmentPass', 'ASTCatchParameter', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaPropertyUtil', 'ASTVariableAccess', 'ASTInitializer', 'JavadocTag', 'TokenUtils', 'ASTCompilationUnit', 'SymbolicValueHelper', 'TypesFromAst', 'JavaSemanticErrors', 'ASTCatchClause', 'JavaRuleUtil', 'AstImplUtil', 'ClassNamesUtil', 'InternalApiBridge', 'ASTTryStatement', 'TypesFromReflection', 'ASTThrowStatement', 'ASTBlock', 'ASTVariableDeclaratorId', 'ASTModifierList', 'ASTClassOrInterfaceType', 'JavaAstUtils', 'TypeConversion', 'TypeTestUtil', 'TestFrameworksUtil']
*Get all catch blocks in the try-catch statement.* 匹配到的API：
query: Get all catch blocks in the try-catch statement.
most similar API: get catch clauses of try statement
cosine Similarity: 0.8611595034599304
*Check whether there are multiple catch blocks.* 匹配到的API：
query: Check whether there are multiple catch blocks.
most similar API: Check whether the catch parameter is multicatch
cosine Similarity: 0.8584250211715698
*For each catch block, get the exception type being caught.* 匹配到的API：
query: For each catch block, get the exception type being caught.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.8730904459953308
*Check whether the exception types are different.* 匹配到的API：
query: Check whether the exception types are different.
most similar API: Check whether has exception list
cosine Similarity: 0.812656819820404
*For each catch block, get the body of the catch block.* 匹配到的API：
query: For each catch block, get the body of the catch block.
most similar API: get body of catch clause
cosine Similarity: 0.8557538986206055
*Check whether the bodies of the catch blocks are identical.* 匹配到的API：
未匹配成功元操作或API
*Check whether the catch blocks can be collapsed into a single multi-catch block.* 匹配到的API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Identical catch branches use up vertical space and increase the complexity of code without adding functionality. It’s better style to collapse identical branches into a single multi-catch branch.;
The test case corresponding to the rule:
```
// Collapsible statement
class Foo {
    {
        try {
            // do something
        } catch (IllegalArgumentException e) {
            throw e;
        } catch (IllegalStateException e) { // Can be collapsed into the previous block
            throw e;
        }
    }
}
The description of this test case is: bad 1
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTInitializer
      ——ASTBlock
        ——ASTTryStatement
          ——ASTBlock
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTVariableAccess (referenced variable name = 'e')
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTVariableAccess (referenced variable name = 'e')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.codestyle;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTTryStatement: public net.sourceforge.pmd.lang.ast.NodeStream<ASTCatchClause> getCatchClauses(), //Returns the catch statement nodes of this try statement. If there are none, returns an empty list.
2. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public boolean isMulticatch(), //Returns true if this is a multi-catch parameter, that is, it catches several unrelated exception types at the same time. For example: <pre>catch (IllegalStateException | IllegalArgumentException e) {}</pre>
3. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public net.sourceforge.pmd.lang.ast.NodeStream<ASTClassOrInterfaceType> getAllExceptionTypes(), //Returns a stream of all declared exception types (expanding a union type if present). <p>Note that this is the only reliable way to inspect multi-catch clauses, as the type mirror of a {@link ASTUnionType} is not itself a {@link JIntersectionType}, but the {@link TypeSystem#lub(Collection) LUB} of the components. Since exception types cannot be interfaces, the LUB always erases to a single class supertype (eg {@link RuntimeException}).
4. net.sourceforge.pmd.lang.java.ast.internal.JavaAstUtils: static public boolean hasExceptionList(net.sourceforge.pmd.lang.java.ast.ASTMethodOrConstructorDeclaration, [Ljava.lang.Class;)
5. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public net.sourceforge.pmd.lang.java.ast.ASTBlock getBody(), //Returns the body of this catch branch.


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.codestyle;


import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public IdenticalCatchBranchesRule() {
        super(ASTTryStatement.class);
    }

    @Override
    public Object visit(ASTTryStatement node, Object data) {
        NodeStream<ASTCatchClause> catchClauses = node.getCatchClauses();
        if (catchClauses.count() > 1) {
            ASTCatchClause previousCatch = null;
            for (ASTCatchClause catchClause : catchClauses) {
                if (previousCatch != null && areCatchBranchesIdentical(previousCatch, catchClause)) {
                    addViolation(data, catchClause);
                }
                previousCatch = catchClause;
            }
        }
        return super.visit(node, data);
    }

    private boolean areCatchBranchesIdentical(ASTCatchClause catch1, ASTCatchClause catch2) {
        return catch1.getBody().toString().equals(catch2.getBody().toString());
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
True
编译通过
测试用例是否通过：
False
5轮生成的都没通过第一个测试用例，删除此测试用例，换一个生成first checker
删除此测试用例: bad 1
1884
1488
==========================第1轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get all `catch` blocks in the `try` statement.
2. Check whether there are multiple `catch` blocks.
3. For each `catch` block, get the exception type and the body of the `catch` block.
4. Compare the bodies of all `catch` blocks to check if they are identical.
5. Check whether the exception types in the `catch` blocks are different.
6. If there are multiple `catch` blocks with identical bodies but different exception types, then this test case violates the rule.

In this test case:
- There are two `catch` blocks.
- The bodies of both `catch` blocks are identical (`throw new RuntimeException(e);` and `throw new RuntimeException(ise);`).
- The exception types are different (`IllegalArgumentException` and `IllegalStateException`).
- Therefore, this test case violates the rule. The number of violations is 1.
['Get all `catch` blocks in the `try` statement.', 'Check whether there are multiple `catch` blocks.', 'For each `catch` block, get the exception type and the body of the `catch` block.', 'Compare the bodies of all `catch` blocks to check if they are identical.', 'Check whether the exception types in the `catch` blocks are different.', 'If there are multiple `catch` blocks with identical bodies but different exception types, then this test case violates the rule.']
['ASTClassOrInterfaceDeclaration', 'CommentAssignmentPass', 'ASTCatchParameter', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaPropertyUtil', 'ASTVariableAccess', 'ASTInitializer', 'JavadocTag', 'TokenUtils', 'ASTCompilationUnit', 'SymbolicValueHelper', 'TypesFromAst', 'JavaSemanticErrors', 'ASTConstructorCall', 'ASTCatchClause', 'JavaRuleUtil', 'AstImplUtil', 'ClassNamesUtil', 'InternalApiBridge', 'ASTTryStatement', 'TypesFromReflection', 'ASTArgumentList', 'ASTThrowStatement', 'ASTBlock', 'ASTVariableDeclaratorId', 'ASTModifierList', 'ASTClassOrInterfaceType', 'JavaAstUtils', 'TypeConversion', 'TypeTestUtil', 'TestFrameworksUtil']
*Get all `catch` blocks in the `try` statement.* 匹配到的API：
query: Get all `catch` blocks in the `try` statement.
most similar API: get catch clauses of try statement
cosine Similarity: 0.8751448392868042
*Check whether there are multiple `catch` blocks.* 匹配到的API：
query: Check whether there are multiple `catch` blocks.
most similar API: Check whether the catch parameter is multicatch
cosine Similarity: 0.858930230140686
*For each `catch` block, get the exception type and the body of the `catch` block.* 匹配到的API：
query: For each `catch` block, get the exception type and the body of the `catch` block.
most similar API: get body of catch clause
cosine Similarity: 0.8354629278182983
*Compare the bodies of all `catch` blocks to check if they are identical.* 匹配到的API：
query: Compare the bodies of all `catch` blocks to check if they are identical.
most similar API: Check whether the catch clause equals
cosine Similarity: 0.8021183013916016
*Check whether the exception types in the `catch` blocks are different.* 匹配到的API：
query: Check whether the exception types in the `catch` blocks are different.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.8128100037574768
*If there are multiple `catch` blocks with identical bodies but different exception types, then this test case violates the rule.* 匹配到的API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Identical catch branches use up vertical space and increase the complexity of code without adding functionality. It’s better style to collapse identical branches into a single multi-catch branch.;
The test case corresponding to the rule:
```
// Identical statements, with different exception names
class Foo {
    {
        try {
            // do something
        } catch (IllegalArgumentException e) {
            throw new RuntimeException(e);
        } catch (IllegalStateException ise) {
            throw new RuntimeException(ise);
        }
    }
}
The description of this test case is: bad 2
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTInitializer
      ——ASTBlock
        ——ASTTryStatement
          ——ASTBlock
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTConstructorCall
                  ——ASTClassOrInterfaceType (this is a class type)
                  ——ASTArgumentList (size = 1)
                    ——ASTVariableAccess (referenced variable name = 'e')
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'ise')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTConstructorCall
                  ——ASTClassOrInterfaceType (this is a class type)
                  ——ASTArgumentList (size = 1)
                    ——ASTVariableAccess (referenced variable name = 'ise')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.codestyle;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTTryStatement: public net.sourceforge.pmd.lang.ast.NodeStream<ASTCatchClause> getCatchClauses(), //Returns the catch statement nodes of this try statement. If there are none, returns an empty list.
2. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public boolean isMulticatch(), //Returns true if this is a multi-catch parameter, that is, it catches several unrelated exception types at the same time. For example: <pre>catch (IllegalStateException | IllegalArgumentException e) {}</pre>
3. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public net.sourceforge.pmd.lang.java.ast.ASTBlock getBody(), //Returns the body of this catch branch.
4. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public boolean equals(java.lang.Object)
5. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public net.sourceforge.pmd.lang.ast.NodeStream<ASTClassOrInterfaceType> getAllExceptionTypes(), //Returns a stream of all declared exception types (expanding a union type if present). <p>Note that this is the only reliable way to inspect multi-catch clauses, as the type mirror of a {@link ASTUnionType} is not itself a {@link JIntersectionType}, but the {@link TypeSystem#lub(Collection) LUB} of the components. Since exception types cannot be interfaces, the LUB always erases to a single class supertype (eg {@link RuntimeException}).


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.codestyle;

import java.util.*;
import java.lang.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public IdenticalCatchBranchesRule() {
        super(ASTTryStatement.class);
    }

    @Override
    public Object visit(ASTTryStatement node, Object data) {
        NodeStream<ASTCatchClause> catchClauses = node.getCatchClauses();
        if (catchClauses.size() < 2) {
            return super.visit(node, data);
        }

        List<ASTCatchClause> clauses = catchClauses.toList();
        for (int i = 0; i < clauses.size() - 1; i++) {
            ASTCatchClause current = clauses.get(i);
            ASTCatchClause next = clauses.get(i + 1);

            if (current.getBody().equals(next.getBody())) {
                addViolation(data, current);
            }
        }

        return super.visit(node, data);
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
==========================第2轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get the number of catch blocks in the try-catch statement.
2. Check whether the number of catch blocks is greater than 1.
3. For each catch block, get the exception type.
4. For each catch block, get the body of the catch block.
5. Compare the bodies of all catch blocks to check if they are identical.
6. If the bodies of all catch blocks are identical, check whether they are combined into a single multi-catch block.
7. If the bodies of all catch blocks are identical and not combined into a single multi-catch block, then this test case violates the rule.

In this test case:
- There are 2 catch blocks.
- The bodies of both catch blocks are identical (`throw new RuntimeException(e);` and `throw new RuntimeException(ise);`).
- The catch blocks are not combined into a single multi-catch block.

Therefore, this test case violates the rule. The number of violations is 1.
['Get the number of catch blocks in the try-catch statement.', 'Check whether the number of catch blocks is greater than 1.', 'For each catch block, get the exception type.', 'For each catch block, get the body of the catch block.', 'Compare the bodies of all catch blocks to check if they are identical.', 'If the bodies of all catch blocks are identical, check whether they are combined into a single multi-catch block.', 'If the bodies of all catch blocks are identical and not combined into a single multi-catch block, then this test case violates the rule.']
['ASTClassOrInterfaceDeclaration', 'CommentAssignmentPass', 'ASTCatchParameter', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaPropertyUtil', 'ASTVariableAccess', 'ASTInitializer', 'JavadocTag', 'TokenUtils', 'ASTCompilationUnit', 'SymbolicValueHelper', 'TypesFromAst', 'JavaSemanticErrors', 'ASTConstructorCall', 'ASTCatchClause', 'JavaRuleUtil', 'AstImplUtil', 'ClassNamesUtil', 'InternalApiBridge', 'ASTTryStatement', 'TypesFromReflection', 'ASTArgumentList', 'ASTThrowStatement', 'ASTBlock', 'ASTVariableDeclaratorId', 'ASTModifierList', 'ASTClassOrInterfaceType', 'JavaAstUtils', 'TypeConversion', 'TypeTestUtil', 'TestFrameworksUtil']
*Get the number of catch blocks in the try-catch statement.* 匹配到的API：
query: Get the number of catch blocks in the try-catch statement.
most similar API: get num children of catch clause
cosine Similarity: 0.8042116165161133
*Check whether the number of catch blocks is greater than 1.* 匹配到的API：
未匹配成功元操作或API
*For each catch block, get the exception type.* 匹配到的API：
query: For each catch block, get the exception type.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.882443368434906
*For each catch block, get the body of the catch block.* 匹配到的API：
query: For each catch block, get the body of the catch block.
most similar API: get body of catch clause
cosine Similarity: 0.8557538986206055
*Compare the bodies of all catch blocks to check if they are identical.* 匹配到的API：
未匹配成功元操作或API
*If the bodies of all catch blocks are identical, check whether they are combined into a single multi-catch block.* 匹配到的API：
未匹配成功元操作或API
*If the bodies of all catch blocks are identical and not combined into a single multi-catch block, then this test case violates the rule.* 匹配到的API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Identical catch branches use up vertical space and increase the complexity of code without adding functionality. It’s better style to collapse identical branches into a single multi-catch branch.;
The test case corresponding to the rule:
```
// Identical statements, with different exception names
class Foo {
    {
        try {
            // do something
        } catch (IllegalArgumentException e) {
            throw new RuntimeException(e);
        } catch (IllegalStateException ise) {
            throw new RuntimeException(ise);
        }
    }
}
The description of this test case is: bad 2
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTInitializer
      ——ASTBlock
        ——ASTTryStatement
          ——ASTBlock
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTConstructorCall
                  ——ASTClassOrInterfaceType (this is a class type)
                  ——ASTArgumentList (size = 1)
                    ——ASTVariableAccess (referenced variable name = 'e')
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'ise')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTConstructorCall
                  ——ASTClassOrInterfaceType (this is a class type)
                  ——ASTArgumentList (size = 1)
                    ——ASTVariableAccess (referenced variable name = 'ise')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.codestyle;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public int getNumChildren()
2. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public net.sourceforge.pmd.lang.ast.NodeStream<ASTClassOrInterfaceType> getAllExceptionTypes(), //Returns a stream of all declared exception types (expanding a union type if present). <p>Note that this is the only reliable way to inspect multi-catch clauses, as the type mirror of a {@link ASTUnionType} is not itself a {@link JIntersectionType}, but the {@link TypeSystem#lub(Collection) LUB} of the components. Since exception types cannot be interfaces, the LUB always erases to a single class supertype (eg {@link RuntimeException}).
3. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public net.sourceforge.pmd.lang.java.ast.ASTBlock getBody(), //Returns the body of this catch branch.


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.codestyle;

import java.util.*;
import java.lang.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public IdenticalCatchBranchesRule() {
        super(ASTTryStatement.class);
    }

    @Override
    public Object visit(ASTTryStatement node, Object data) {
        List<ASTCatchClause> catchClauses = node.children(ASTCatchClause.class).toList();
        if (catchClauses.size() > 1) {
            ASTCatchClause firstCatch = catchClauses.get(0);
            ASTBlock firstBody = firstCatch.getBody();
            for (int i = 1; i < catchClauses.size(); i++) {
                ASTCatchClause currentCatch = catchClauses.get(i);
                ASTBlock currentBody = currentCatch.getBody();
                if (areBlocksIdentical(firstBody, currentBody)) {
                    addViolation(data, currentCatch);
                }
            }
        }
        return super.visit(node, data);
    }

    private boolean areBlocksIdentical(ASTBlock block1, ASTBlock block2) {
        List<JavaNode> nodes1 = block1.children().toList();
        List<JavaNode> nodes2 = block2.children().toList();
        if (nodes1.size() != nodes2.size()) {
            return false;
        }
        for (int i = 0; i < nodes1.size(); i++) {
            if (!nodes1.get(i).getClass().equals(nodes2.get(i).getClass())) {
                return false;
            }
            if (nodes1.get(i) instanceof ASTThrowStatement) {
                ASTThrowStatement throw1 = (ASTThrowStatement) nodes1.get(i);
                ASTThrowStatement throw2 = (ASTThrowStatement) nodes2.get(i);
                if (!areThrowStatementsIdentical(throw1, throw2)) {
                    return false;
                }
            }
        }
        return true;
    }

    private boolean areThrowStatementsIdentical(ASTThrowStatement throw1, ASTThrowStatement throw2) {
        ASTConstructorCall call1 = throw1.firstChild(ASTConstructorCall.class);
        ASTConstructorCall call2 = throw2.firstChild(ASTConstructorCall.class);
        if (call1 == null || call2 == null) {
            return false;
        }
        if (!call1.getType().equals(call2.getType())) {
            return false;
        }
        List<JavaNode> args1 = call1.children().toList();
        List<JavaNode> args2 = call2.children().toList();
        if (args1.size() != args2.size()) {
            return false;
        }
        for (int i = 0; i < args1.size(); i++) {
            if (!args1.get(i).getClass().equals(args2.get(i).getClass())) {
                return false;
            }
            if (args1.get(i) instanceof ASTVariableAccess) {
                ASTVariableAccess var1 = (ASTVariableAccess) args1.get(i);
                ASTVariableAccess var2 = (ASTVariableAccess) args2.get(i);
                if (!var1.getReferencedSym().equals(var2.getReferencedSym())) {
                    return false;
                }
            }
        }
        return true;
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
False
编译错误不在预期范围内，重新生成
==========================第3轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get all catch blocks in the try statement.
2. Check whether there are multiple catch blocks.
3. For each catch block, get the exception type.
4. For each catch block, get the body of the catch block.
5. Compare the bodies of all catch blocks to check if they are identical.
6. Check whether the exception types in the catch blocks are different.
7. Check whether the catch blocks could be combined into a single multi-catch block.

If there are multiple catch blocks with identical bodies but different exception types, and they could be combined into a single multi-catch block, then this test case violates the rule. The number of violations is 1.
['Get all catch blocks in the try statement.', 'Check whether there are multiple catch blocks.', 'For each catch block, get the exception type.', 'For each catch block, get the body of the catch block.', 'Compare the bodies of all catch blocks to check if they are identical.', 'Check whether the exception types in the catch blocks are different.', 'Check whether the catch blocks could be combined into a single multi-catch block.']
['ASTClassOrInterfaceDeclaration', 'CommentAssignmentPass', 'ASTCatchParameter', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaPropertyUtil', 'ASTVariableAccess', 'ASTInitializer', 'JavadocTag', 'TokenUtils', 'ASTCompilationUnit', 'SymbolicValueHelper', 'TypesFromAst', 'JavaSemanticErrors', 'ASTConstructorCall', 'ASTCatchClause', 'JavaRuleUtil', 'AstImplUtil', 'ClassNamesUtil', 'InternalApiBridge', 'ASTTryStatement', 'TypesFromReflection', 'ASTArgumentList', 'ASTThrowStatement', 'ASTBlock', 'ASTVariableDeclaratorId', 'ASTModifierList', 'ASTClassOrInterfaceType', 'JavaAstUtils', 'TypeConversion', 'TypeTestUtil', 'TestFrameworksUtil']
*Get all catch blocks in the try statement.* 匹配到的API：
query: Get all catch blocks in the try statement.
most similar API: get catch clauses of try statement
cosine Similarity: 0.8826898336410522
*Check whether there are multiple catch blocks.* 匹配到的API：
query: Check whether there are multiple catch blocks.
most similar API: Check whether the catch parameter is multicatch
cosine Similarity: 0.8584250211715698
*For each catch block, get the exception type.* 匹配到的API：
query: For each catch block, get the exception type.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.882443368434906
*For each catch block, get the body of the catch block.* 匹配到的API：
query: For each catch block, get the body of the catch block.
most similar API: get body of catch clause
cosine Similarity: 0.8557538986206055
*Compare the bodies of all catch blocks to check if they are identical.* 匹配到的API：
未匹配成功元操作或API
*Check whether the exception types in the catch blocks are different.* 匹配到的API：
query: Check whether the exception types in the catch blocks are different.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.8111014366149902
*Check whether the catch blocks could be combined into a single multi-catch block.* 匹配到的API：
query: Check whether the catch blocks could be combined into a single multi-catch block.
most similar API: Check whether the catch parameter is multicatch
cosine Similarity: 0.8228443264961243
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Identical catch branches use up vertical space and increase the complexity of code without adding functionality. It’s better style to collapse identical branches into a single multi-catch branch.;
The test case corresponding to the rule:
```
// Identical statements, with different exception names
class Foo {
    {
        try {
            // do something
        } catch (IllegalArgumentException e) {
            throw new RuntimeException(e);
        } catch (IllegalStateException ise) {
            throw new RuntimeException(ise);
        }
    }
}
The description of this test case is: bad 2
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTInitializer
      ——ASTBlock
        ——ASTTryStatement
          ——ASTBlock
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTConstructorCall
                  ——ASTClassOrInterfaceType (this is a class type)
                  ——ASTArgumentList (size = 1)
                    ——ASTVariableAccess (referenced variable name = 'e')
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'ise')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTConstructorCall
                  ——ASTClassOrInterfaceType (this is a class type)
                  ——ASTArgumentList (size = 1)
                    ——ASTVariableAccess (referenced variable name = 'ise')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.codestyle;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTTryStatement: public net.sourceforge.pmd.lang.ast.NodeStream<ASTCatchClause> getCatchClauses(), //Returns the catch statement nodes of this try statement. If there are none, returns an empty list.
2. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public boolean isMulticatch(), //Returns true if this is a multi-catch parameter, that is, it catches several unrelated exception types at the same time. For example: <pre>catch (IllegalStateException | IllegalArgumentException e) {}</pre>
3. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public net.sourceforge.pmd.lang.ast.NodeStream<ASTClassOrInterfaceType> getAllExceptionTypes(), //Returns a stream of all declared exception types (expanding a union type if present). <p>Note that this is the only reliable way to inspect multi-catch clauses, as the type mirror of a {@link ASTUnionType} is not itself a {@link JIntersectionType}, but the {@link TypeSystem#lub(Collection) LUB} of the components. Since exception types cannot be interfaces, the LUB always erases to a single class supertype (eg {@link RuntimeException}).
4. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public net.sourceforge.pmd.lang.java.ast.ASTBlock getBody(), //Returns the body of this catch branch.


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.codestyle;

import java.util.*;
import java.lang.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public IdenticalCatchBranchesRule() {
        super(ASTTryStatement.class);
    }

    @Override
    public Object visit(ASTTryStatement node, Object data) {
        List<ASTCatchClause> catchClauses = node.getCatchClauses().toList();
        if (catchClauses.size() < 2) {
            return super.visit(node, data);
        }

        for (int i = 0; i < catchClauses.size() - 1; i++) {
            ASTCatchClause current = catchClauses.get(i);
            ASTCatchClause next = catchClauses.get(i + 1);

            if (areCatchBodiesIdentical(current, next)) {
                addViolation(data, current);
            }
        }

        return super.visit(node, data);
    }

    private boolean areCatchBodiesIdentical(ASTCatchClause catch1, ASTCatchClause catch2) {
        ASTBlock body1 = catch1.getBody();
        ASTBlock body2 = catch2.getBody();

        if (body1.getNumChildren() != body2.getNumChildren()) {
            return false;
        }

        for (int i = 0; i < body1.getNumChildren(); i++) {
            JavaNode node1 = body1.getChild(i);
            JavaNode node2 = body2.getChild(i);

            if (!node1.getText().equals(node2.getText())) {
                return false;
            }
        }

        return true;
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
True
编译通过
测试用例是否通过：
False
==========================第4轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get all catch blocks in the try-catch statement.
2. Check whether there are multiple catch blocks.
3. For each catch block, get the exception type and the body of the catch block.
4. Compare the bodies of all catch blocks to check if they are identical.
5. Check whether the exception types in the catch blocks are different.
6. If there are multiple catch blocks with identical bodies but different exception types, then this test case violates the rule.

In this test case:
- There are two catch blocks.
- The bodies of both catch blocks are identical (`throw new RuntimeException(e);` and `throw new RuntimeException(ise);`).
- The exception types are different (`IllegalArgumentException` and `IllegalStateException`).
- Therefore, this test case violates the rule. The number of violations is 1.
['Get all catch blocks in the try-catch statement.', 'Check whether there are multiple catch blocks.', 'For each catch block, get the exception type and the body of the catch block.', 'Compare the bodies of all catch blocks to check if they are identical.', 'Check whether the exception types in the catch blocks are different.', 'If there are multiple catch blocks with identical bodies but different exception types, then this test case violates the rule.']
['ASTClassOrInterfaceDeclaration', 'CommentAssignmentPass', 'ASTCatchParameter', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaPropertyUtil', 'ASTVariableAccess', 'ASTInitializer', 'JavadocTag', 'TokenUtils', 'ASTCompilationUnit', 'SymbolicValueHelper', 'TypesFromAst', 'JavaSemanticErrors', 'ASTConstructorCall', 'ASTCatchClause', 'JavaRuleUtil', 'AstImplUtil', 'ClassNamesUtil', 'InternalApiBridge', 'ASTTryStatement', 'TypesFromReflection', 'ASTArgumentList', 'ASTThrowStatement', 'ASTBlock', 'ASTVariableDeclaratorId', 'ASTModifierList', 'ASTClassOrInterfaceType', 'JavaAstUtils', 'TypeConversion', 'TypeTestUtil', 'TestFrameworksUtil']
*Get all catch blocks in the try-catch statement.* 匹配到的API：
query: Get all catch blocks in the try-catch statement.
most similar API: get catch clauses of try statement
cosine Similarity: 0.8611595034599304
*Check whether there are multiple catch blocks.* 匹配到的API：
query: Check whether there are multiple catch blocks.
most similar API: Check whether the catch parameter is multicatch
cosine Similarity: 0.8584250211715698
*For each catch block, get the exception type and the body of the catch block.* 匹配到的API：
query: For each catch block, get the exception type and the body of the catch block.
most similar API: get body of catch clause
cosine Similarity: 0.8395326137542725
*Compare the bodies of all catch blocks to check if they are identical.* 匹配到的API：
未匹配成功元操作或API
*Check whether the exception types in the catch blocks are different.* 匹配到的API：
query: Check whether the exception types in the catch blocks are different.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.8111014366149902
*If there are multiple catch blocks with identical bodies but different exception types, then this test case violates the rule.* 匹配到的API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Identical catch branches use up vertical space and increase the complexity of code without adding functionality. It’s better style to collapse identical branches into a single multi-catch branch.;
The test case corresponding to the rule:
```
// Identical statements, with different exception names
class Foo {
    {
        try {
            // do something
        } catch (IllegalArgumentException e) {
            throw new RuntimeException(e);
        } catch (IllegalStateException ise) {
            throw new RuntimeException(ise);
        }
    }
}
The description of this test case is: bad 2
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTInitializer
      ——ASTBlock
        ——ASTTryStatement
          ——ASTBlock
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTConstructorCall
                  ——ASTClassOrInterfaceType (this is a class type)
                  ——ASTArgumentList (size = 1)
                    ——ASTVariableAccess (referenced variable name = 'e')
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'ise')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTConstructorCall
                  ——ASTClassOrInterfaceType (this is a class type)
                  ——ASTArgumentList (size = 1)
                    ——ASTVariableAccess (referenced variable name = 'ise')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.codestyle;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTTryStatement: public net.sourceforge.pmd.lang.ast.NodeStream<ASTCatchClause> getCatchClauses(), //Returns the catch statement nodes of this try statement. If there are none, returns an empty list.
2. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public boolean isMulticatch(), //Returns true if this is a multi-catch parameter, that is, it catches several unrelated exception types at the same time. For example: <pre>catch (IllegalStateException | IllegalArgumentException e) {}</pre>
3. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public net.sourceforge.pmd.lang.java.ast.ASTBlock getBody(), //Returns the body of this catch branch.
4. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public net.sourceforge.pmd.lang.ast.NodeStream<ASTClassOrInterfaceType> getAllExceptionTypes(), //Returns a stream of all declared exception types (expanding a union type if present). <p>Note that this is the only reliable way to inspect multi-catch clauses, as the type mirror of a {@link ASTUnionType} is not itself a {@link JIntersectionType}, but the {@link TypeSystem#lub(Collection) LUB} of the components. Since exception types cannot be interfaces, the LUB always erases to a single class supertype (eg {@link RuntimeException}).


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.codestyle;

import java.util.*;
import java.lang.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public IdenticalCatchBranchesRule() {
        super(ASTTryStatement.class);
    }

    @Override
    public Object visit(ASTTryStatement node, Object data) {
        List<ASTCatchClause> catchClauses = node.getCatchClauses().toList();
        if (catchClauses.size() < 2) {
            return super.visit(node, data);
        }

        for (int i = 0; i < catchClauses.size() - 1; i++) {
            ASTCatchClause current = catchClauses.get(i);
            ASTCatchClause next = catchClauses.get(i + 1);

            if (areCatchBranchesIdentical(current, next)) {
                addViolation(data, current);
            }
        }

        return super.visit(node, data);
    }

    private boolean areCatchBranchesIdentical(ASTCatchClause catch1, ASTCatchClause catch2) {
        ASTBlock body1 = catch1.getBody();
        ASTBlock body2 = catch2.getBody();

        if (body1.getNumChildren() != body2.getNumChildren()) {
            return false;
        }

        for (int i = 0; i < body1.getNumChildren(); i++) {
            JavaNode node1 = body1.getChild(i);
            JavaNode node2 = body2.getChild(i);

            if (!node1.getText().equals(node2.getText())) {
                return false;
            }
        }

        return true;
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
True
编译通过
测试用例是否通过：
False
==========================第5轮为第一个测试用例生成checker========================
=========================logics=========================
1. Get all catch blocks in the try-catch statement.
2. Check whether there are multiple catch blocks.
3. For each catch block, get the exception type.
4. For each catch block, get the body of the catch block.
5. Check whether the bodies of the catch blocks are identical.
6. Check whether the exception types are different.
7. If there are multiple catch blocks with identical bodies but different exception types, then this test case violates the rule.

In this test case:
- There are two catch blocks.
- The exception types are `IllegalArgumentException` and `IllegalStateException`.
- The bodies of both catch blocks are identical: `throw new RuntimeException(e);` and `throw new RuntimeException(ise);`.
- Therefore, this test case violates the rule. The number of violations is 1.
['Get all catch blocks in the try-catch statement.', 'Check whether there are multiple catch blocks.', 'For each catch block, get the exception type.', 'For each catch block, get the body of the catch block.', 'Check whether the bodies of the catch blocks are identical.', 'Check whether the exception types are different.', 'If there are multiple catch blocks with identical bodies but different exception types, then this test case violates the rule.']
['ASTClassOrInterfaceDeclaration', 'CommentAssignmentPass', 'ASTCatchParameter', 'SymbolResolutionPass', 'ASTClassOrInterfaceBody', 'JavaPropertyUtil', 'ASTVariableAccess', 'ASTInitializer', 'JavadocTag', 'TokenUtils', 'ASTCompilationUnit', 'SymbolicValueHelper', 'TypesFromAst', 'JavaSemanticErrors', 'ASTConstructorCall', 'ASTCatchClause', 'JavaRuleUtil', 'AstImplUtil', 'ClassNamesUtil', 'InternalApiBridge', 'ASTTryStatement', 'TypesFromReflection', 'ASTArgumentList', 'ASTThrowStatement', 'ASTBlock', 'ASTVariableDeclaratorId', 'ASTModifierList', 'ASTClassOrInterfaceType', 'JavaAstUtils', 'TypeConversion', 'TypeTestUtil', 'TestFrameworksUtil']
*Get all catch blocks in the try-catch statement.* 匹配到的API：
query: Get all catch blocks in the try-catch statement.
most similar API: get catch clauses of try statement
cosine Similarity: 0.8611595034599304
*Check whether there are multiple catch blocks.* 匹配到的API：
query: Check whether there are multiple catch blocks.
most similar API: Check whether the catch parameter is multicatch
cosine Similarity: 0.8584250211715698
*For each catch block, get the exception type.* 匹配到的API：
query: For each catch block, get the exception type.
most similar API: get all exception types of catch parameter
cosine Similarity: 0.882443368434906
*For each catch block, get the body of the catch block.* 匹配到的API：
query: For each catch block, get the body of the catch block.
most similar API: get body of catch clause
cosine Similarity: 0.8557538986206055
*Check whether the bodies of the catch blocks are identical.* 匹配到的API：
未匹配成功元操作或API
*Check whether the exception types are different.* 匹配到的API：
query: Check whether the exception types are different.
most similar API: Check whether has exception list
cosine Similarity: 0.812656819820404
*If there are multiple catch blocks with identical bodies but different exception types, then this test case violates the rule.* 匹配到的API：
未匹配成功元操作或API
开始写checker
==========================The_first_checker_query=========================
You are an expert in writing java rule checkers and I need your help to generate a custom java rule checker in PMD tool version 7.0.0. 
I will give you a rule description, which may contain multiple violations. You just need to generate a checker that can check the violations of the given test case.

The following is a description of the rule and the corresponding counterexample test case and the AST of the counterexample test case:

Rule description: Identical catch branches use up vertical space and increase the complexity of code without adding functionality. It’s better style to collapse identical branches into a single multi-catch branch.;
The test case corresponding to the rule:
```
// Identical statements, with different exception names
class Foo {
    {
        try {
            // do something
        } catch (IllegalArgumentException e) {
            throw new RuntimeException(e);
        } catch (IllegalStateException ise) {
            throw new RuntimeException(ise);
        }
    }
}
The description of this test case is: bad 2
The number of violating the rule in this test case is: 1

```
The AST corresponding to this test case(nodes in checker code are better selected from this ast):
ASTCompilationUnit
——ASTClassOrInterfaceDeclaration (class name = 'Foo')
  ——ASTModifierList
  ——ASTClassOrInterfaceBody
    ——ASTInitializer
      ——ASTBlock
        ——ASTTryStatement
          ——ASTBlock
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'e')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTConstructorCall
                  ——ASTClassOrInterfaceType (this is a class type)
                  ——ASTArgumentList (size = 1)
                    ——ASTVariableAccess (referenced variable name = 'e')
          ——ASTCatchClause
            ——ASTCatchParameter
              ——ASTModifierList
              ——ASTClassOrInterfaceType (this is a class type)
              ——ASTVariableDeclaratorId (declared variable name = 'ise')
            ——ASTBlock
              ——ASTThrowStatement
                ——ASTConstructorCall
                  ——ASTClassOrInterfaceType (this is a class type)
                  ——ASTArgumentList (size = 1)
                    ——ASTVariableAccess (referenced variable name = 'ise')

Note, when there are consecutive method calls, the last call is at the upper level of the syntax tree.

The checker code framework(you must conform to):
```java
package net.sourceforge.pmd.lang.java.rule.codestyle;
import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast.*;
import net.sourceforge.pmd.lang.java.ast.internal.*;
import net.sourceforge.pmd.lang.java.types.*;
import net.sourceforge.pmd.lang.java.symbols.*;
import net.sourceforge.pmd.lang.java.ast.JavaNode;
import net.sourceforge.pmd.lang.ast.NodeStream;
import java.util.*;
import java.lang.*;

public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public rule_name() {
        super(node1_Of_AST_to_visit.class, node2_Of_AST_to_visit.class, ...);
    }
    @Override
    public Object visit(node1_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    @Override
    public Object visit(node2_Of_AST_to_visit node, Object data) {
        return super.visit(node, data);
    }
    ...
}
```
Some useful packages are already imported, if you need other packages, please import additionally.

The rule checker could only visit nodes in test case's ast, and it would be better to select a most efficient and direct node to visit rather than visit the entry to the program if possible.
Please give me the complete checker code including the import info, do not contain pseudocode, and do not give it step by step. No comment needed.

Below are some APIs and code snippets consisting of existing APIs, they implement specific functionality, you can selectively use them directly without changing it if you need:

1. net.sourceforge.pmd.lang.java.ast.ASTTryStatement: public net.sourceforge.pmd.lang.ast.NodeStream<ASTCatchClause> getCatchClauses(), //Returns the catch statement nodes of this try statement. If there are none, returns an empty list.
2. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public boolean isMulticatch(), //Returns true if this is a multi-catch parameter, that is, it catches several unrelated exception types at the same time. For example: <pre>catch (IllegalStateException | IllegalArgumentException e) {}</pre>
3. net.sourceforge.pmd.lang.java.ast.ASTCatchParameter: public net.sourceforge.pmd.lang.ast.NodeStream<ASTClassOrInterfaceType> getAllExceptionTypes(), //Returns a stream of all declared exception types (expanding a union type if present). <p>Note that this is the only reliable way to inspect multi-catch clauses, as the type mirror of a {@link ASTUnionType} is not itself a {@link JIntersectionType}, but the {@link TypeSystem#lub(Collection) LUB} of the components. Since exception types cannot be interfaces, the LUB always erases to a single class supertype (eg {@link RuntimeException}).
4. net.sourceforge.pmd.lang.java.ast.ASTCatchClause: public net.sourceforge.pmd.lang.java.ast.ASTBlock getBody(), //Returns the body of this catch branch.
5. net.sourceforge.pmd.lang.java.ast.internal.JavaAstUtils: static public boolean hasExceptionList(net.sourceforge.pmd.lang.java.ast.ASTMethodOrConstructorDeclaration, [Ljava.lang.Class;)


Below are some edge-related APIs to help traverse abstract syntax tree, if you need, you can use them:

1. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children()
2. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> children(java.lang.Class)
3. public N getChild(int i)
4. public N getFirstChild()
5. public N getLastChild()
6. public N firstChild(java.lang.Class)
7. public int getNumChildren()
8. public int getIndexInParent()
9. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants()
10. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendants(java.lang.Class)
11. public net.sourceforge.pmd.lang.ast.NodeStream.DescendantNodeStream<JavaNode> descendantsOrSelf()
12. public N getParent()
13. public N getNthParent(int i)
14. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors()
15. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestors(java.lang.Class)
16. public net.sourceforge.pmd.lang.ast.NodeStream<JavaNode> ancestorsOrSelf()
17. public N getPreviousSibling()
18. public N getNextSibling()

Please do not use the following API:


==========5轮中每一轮为第一个测试用例生成的checker===============
package net.sourceforge.pmd.lang.java.rule.codestyle;

import java.util.*;
import java.lang.*;

import net.sourceforge.pmd.lang.java.rule.AbstractJavaRulechainRule;
import net.sourceforge.pmd.lang.java.ast. *;
import net.sourceforge.pmd.lang.java.ast.internal. *;
import net.sourceforge.pmd.lang.java.types. *;
import net.sourceforge.pmd.lang.java.symbols. *;
import net.sourceforge.pmd.lang.ast.NodeStream;
public class IdenticalCatchBranchesRule extends AbstractJavaRulechainRule {
    public IdenticalCatchBranchesRule() {
        super(ASTTryStatement.class);
    }

    @Override
    public Object visit(ASTTryStatement node, Object data) {
        List<ASTCatchClause> catchClauses = node.getCatchClauses().toList();
        if (catchClauses.size() < 2) {
            return super.visit(node, data);
        }

        for (int i = 0; i < catchClauses.size() - 1; i++) {
            ASTCatchClause currentCatch = catchClauses.get(i);
            ASTCatchClause nextCatch = catchClauses.get(i + 1);

            if (areCatchBodiesIdentical(currentCatch, nextCatch)) {
                addViolation(data, currentCatch);
                addViolation(data, nextCatch);
            }
        }

        return super.visit(node, data);
    }

    private boolean areCatchBodiesIdentical(ASTCatchClause catch1, ASTCatchClause catch2) {
        ASTBlock body1 = catch1.getBody();
        ASTBlock body2 = catch2.getBody();

        if (body1.getNumChildren() != body2.getNumChildren()) {
            return false;
        }

        for (int i = 0; i < body1.getNumChildren(); i++) {
            JavaNode child1 = body1.getChild(i);
            JavaNode child2 = body2.getChild(i);

            if (!child1.getText().equals(child2.getText())) {
                return false;
            }
        }

        return true;
    }
}
第一个测试用例生成的checker开始编译
一开始编译是否通过：
True
编译通过
测试用例是否通过：
False
5轮生成的都没通过第一个测试用例，删除此测试用例，换一个生成first checker
删除此测试用例: bad 2


======================接下来开始迭代=====================
为反例生成first checker失败
结束

规则执行完毕，时间总花销： 1674.9650373458862 秒
